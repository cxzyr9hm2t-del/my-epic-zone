<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>HAYES' EPIC ZONE Ã°ÂŸÂÂŸÃ¢ÂšÂ¡</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Fredoka:wght@400;600;700&family=Silkscreen&display=swap');
:root{
--blue1:#0a1628;--blue2:#0d2137;--blue3:#1a3a5c;--blue4:#2196F3;--blue5:#64B5F6;--blue6:#BBDEFB;
--gold:#FFD700;--fry:#F4A460;--green:#39FF14;--pink:#FF6EC7;--cyan:#00F0FF;--purple:#B388FF;--orange:#FF9100;
}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--blue1);color:#fff;font-family:'Fredoka',sans-serif;overflow-x:hidden;min-height:100vh}

/* NAV BAR */
.topnav{position:sticky;top:0;z-index:100;background:rgba(10,22,40,0.95);backdrop-filter:blur(12px);border-bottom:2px solid var(--blue4);display:flex;align-items:center;padding:8px 15px;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch}
.topnav::-webkit-scrollbar{height:0}
.nav-btn{background:var(--blue3);border:2px solid var(--blue4);border-radius:12px;padding:6px 14px;color:var(--blue5);font-family:'Fredoka',sans-serif;font-size:13px;cursor:pointer;transition:0.2s;white-space:nowrap;display:flex;align-items:center;gap:4px}
.nav-btn:hover,.nav-btn.active{background:var(--blue4);color:#fff;transform:scale(1.05)}
.nav-logo{font-family:'Bangers';font-size:20px;background:linear-gradient(135deg,var(--blue4),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-right:8px;white-space:nowrap}
.streak-pill{background:linear-gradient(135deg,var(--orange),var(--gold));color:#000;font-family:'Silkscreen';font-size:11px;padding:4px 10px;border-radius:10px;font-weight:700;margin-left:auto;white-space:nowrap;display:flex;align-items:center;gap:4px}

/* HEADER */
header{background:linear-gradient(135deg,var(--blue2),var(--blue3));padding:25px 20px;text-align:center;position:relative;overflow:hidden;border-bottom:4px solid var(--blue4)}
header::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(90deg,transparent,transparent 40px,rgba(33,150,243,0.05) 40px,rgba(33,150,243,0.05) 41px);pointer-events:none}
.logo{font-family:'Bangers',cursive;font-size:clamp(32px,8vw,64px);background:linear-gradient(135deg,var(--blue4),var(--cyan),var(--blue5));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:none;filter:drop-shadow(3px 3px 0 rgba(0,0,0,0.3));letter-spacing:3px}
.subtitle{font-family:'Silkscreen',monospace;font-size:clamp(10px,2.5vw,16px);color:var(--blue5);margin-top:5px;letter-spacing:2px}
.fry-rain{position:absolute;font-size:24px;animation:fryFall linear infinite;opacity:0.6;pointer-events:none}
@keyframes fryFall{0%{transform:translateY(-30px) rotate(0deg)}100%{transform:translateY(100vh) rotate(360deg)}}

/* MOOD CHECK */
.mood-bar{display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap}
.mood-btn{font-size:32px;cursor:pointer;transition:0.2s;background:none;border:3px solid transparent;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center}
.mood-btn:hover{transform:scale(1.3);border-color:var(--cyan)}
.mood-btn.selected{border-color:var(--gold);background:rgba(255,215,0,0.15);transform:scale(1.2)}
.mood-msg{font-family:'Fredoka';font-size:16px;color:var(--cyan);margin-top:8px;min-height:24px;transition:0.3s}

/* WELCOME */
.welcome{padding:25px 20px;text-align:center;position:relative}
.welcome h2{font-family:'Bangers';font-size:clamp(22px,5vw,40px);color:var(--gold);margin-bottom:10px}
.welcome p{font-size:clamp(14px,3vw,20px);color:var(--blue6);max-width:600px;margin:0 auto;line-height:1.6}
.welcome-emoji{font-size:clamp(50px,12vw,90px);display:block;margin-bottom:10px;animation:bounce 1.5s infinite}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}

/* PROFILE BANNER */
.profile-banner{background:linear-gradient(135deg,#0d2850,#1a3a6c);border:2px solid var(--blue4);border-radius:20px;margin:15px 20px;padding:20px;display:flex;align-items:center;gap:20px;flex-wrap:wrap;position:relative;overflow:hidden}
.profile-banner::after{content:'';position:absolute;top:-50%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(33,150,243,0.1),transparent);border-radius:50%}
.avatar-area{text-align:center;min-width:100px}
.avatar-display{font-size:64px;width:90px;height:90px;display:flex;align-items:center;justify-content:center;background:var(--blue2);border:3px solid var(--cyan);border-radius:50%;cursor:pointer;transition:0.3s;position:relative}
.avatar-display:hover{transform:scale(1.1);box-shadow:0 0 20px rgba(0,240,255,0.3)}
.avatar-label{font-family:'Silkscreen';font-size:10px;color:var(--blue5);margin-top:5px}
.profile-stats{flex:1;min-width:200px}
.profile-stats h3{font-family:'Bangers';font-size:24px;color:var(--gold);letter-spacing:1px}
.stat-row{display:flex;gap:15px;flex-wrap:wrap;margin-top:8px}
.stat-item{background:var(--blue2);border:1px solid var(--blue4);border-radius:10px;padding:6px 12px;font-family:'Silkscreen';font-size:11px;color:var(--blue5);display:flex;align-items:center;gap:4px}
.xp-bar-wrap{margin-top:10px;background:var(--blue2);border-radius:10px;height:20px;border:1px solid var(--blue4);overflow:hidden;position:relative}
.xp-bar{height:100%;background:linear-gradient(90deg,var(--blue4),var(--cyan));border-radius:10px;transition:width 0.5s;position:relative}
.xp-bar::after{content:'';position:absolute;top:0;right:0;height:100%;width:30px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3));animation:xpShine 2s infinite}
@keyframes xpShine{0%{transform:translateX(-30px)}100%{transform:translateX(30px)}}
.xp-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:'Silkscreen';font-size:10px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,0.5)}

/* LEVEL BADGE */
.level-badge{background:linear-gradient(135deg,var(--gold),var(--orange));color:#000;font-family:'Bangers';font-size:20px;padding:4px 14px;border-radius:12px;display:inline-flex;align-items:center;gap:4px}

/* CARDS GRID */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px;padding:18px;max-width:1200px;margin:0 auto}
.card{background:linear-gradient(145deg,var(--blue2),var(--blue3));border:2px solid var(--blue4);border-radius:20px;padding:22px;text-align:center;cursor:pointer;transition:all 0.3s;position:relative;overflow:hidden}
.card:hover{transform:translateY(-8px) scale(1.02);border-color:var(--cyan);box-shadow:0 15px 40px rgba(33,150,243,0.3)}
.card:active{transform:scale(0.97)}
.card-icon{font-size:clamp(45px,10vw,65px);display:block;margin-bottom:10px}
.card h3{font-family:'Bangers';font-size:clamp(18px,4vw,26px);color:var(--gold);margin-bottom:6px;letter-spacing:1px}
.card p{font-size:clamp(12px,2.5vw,15px);color:var(--blue5);line-height:1.5}
.card-badge{position:absolute;top:10px;right:10px;background:var(--green);color:#000;font-family:'Silkscreen';font-size:10px;padding:3px 8px;border-radius:8px;font-weight:700}
.card-badge.hot{background:var(--orange)}
.card-badge.epic{background:var(--purple);color:#fff}
.card-glow{position:absolute;inset:0;border-radius:20px;opacity:0;transition:0.3s;pointer-events:none}
.card:hover .card-glow{opacity:1}
.card-lock{position:absolute;inset:0;background:rgba(10,22,40,0.7);border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:40px;backdrop-filter:blur(2px)}

/* SECTION HEADERS */
.section-title{font-family:'Bangers';font-size:clamp(22px,5vw,36px);text-align:center;padding:25px 20px 10px;color:var(--blue5);letter-spacing:2px}
.section-title span{color:var(--gold)}

/* TICKER */
.ticker-wrap{background:var(--blue2);border-top:2px solid var(--blue4);border-bottom:2px solid var(--blue4);padding:10px 0;overflow:hidden;white-space:nowrap;margin:15px 0}
.ticker{display:inline-block;animation:tickerScroll 30s linear infinite;font-family:'Silkscreen';font-size:clamp(12px,2.5vw,15px);color:var(--cyan)}
@keyframes tickerScroll{0%{transform:translateX(100vw)}100%{transform:translateX(-200%)}}

/* ACHIEVEMENT SYSTEM */
.achievements-wrap{display:flex;gap:10px;overflow-x:auto;padding:10px 20px;-webkit-overflow-scrolling:touch}
.achievements-wrap::-webkit-scrollbar{height:4px}
.achievements-wrap::-webkit-scrollbar-thumb{background:var(--blue4);border-radius:4px}
.ach-badge{min-width:80px;background:var(--blue2);border:2px solid var(--blue4);border-radius:14px;padding:8px;text-align:center;transition:0.3s;flex-shrink:0}
.ach-badge.unlocked{border-color:var(--gold);background:linear-gradient(145deg,rgba(255,215,0,0.1),var(--blue2))}
.ach-badge.locked{opacity:0.4;filter:grayscale(1)}
.ach-badge .ach-icon{font-size:28px;display:block}
.ach-badge .ach-name{font-family:'Silkscreen';font-size:9px;color:var(--blue5);margin-top:4px;display:block}
.ach-badge.unlocked .ach-name{color:var(--gold)}

/* PET COMPANION */
.pet-area{text-align:center;padding:10px}
.pet-display{font-size:60px;display:inline-block;cursor:pointer;transition:0.2s;animation:petFloat 3s ease-in-out infinite}
.pet-display:hover{transform:scale(1.2)}
.pet-display:active{transform:scale(0.9)}
@keyframes petFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.pet-msg{font-family:'Fredoka';font-size:14px;color:var(--cyan);margin-top:5px;min-height:20px}
.pet-status{display:flex;gap:8px;justify-content:center;margin-top:8px}
.pet-stat{font-family:'Silkscreen';font-size:10px;color:var(--blue5);background:var(--blue2);border:1px solid var(--blue4);border-radius:8px;padding:3px 8px}

/* CALM ZONE */
.calm-zone{background:linear-gradient(135deg,#0a1a30,#0d1f3a);border-radius:20px;margin:20px;padding:30px;text-align:center;border:2px solid rgba(33,150,243,0.2)}
.calm-zone h3{font-family:'Bangers';font-size:clamp(20px,4vw,30px);color:var(--cyan);margin-bottom:15px}
.breath-circle{width:min(180px,45vw);height:min(180px,45vw);border-radius:50%;background:radial-gradient(circle,rgba(33,150,243,0.3),transparent);border:3px solid var(--blue4);margin:20px auto;display:flex;align-items:center;justify-content:center;font-size:clamp(16px,3vw,20px);color:var(--blue5);animation:breathe 6s ease-in-out infinite}
@keyframes breathe{0%,100%{transform:scale(0.8);border-color:var(--blue4)}50%{transform:scale(1.2);border-color:var(--cyan);box-shadow:0 0 40px rgba(0,240,255,0.3)}}
.calm-btns{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:15px}
.calm-btn{background:var(--blue3);border:2px solid var(--blue4);border-radius:15px;padding:8px 16px;color:var(--blue5);font-family:'Fredoka';font-size:15px;cursor:pointer;transition:0.2s}
.calm-btn:hover{background:var(--blue4);color:#fff;transform:scale(1.05)}

/* DAILY CHALLENGE */
.daily-challenge{background:linear-gradient(135deg,rgba(255,145,0,0.1),rgba(33,150,243,0.1));border:2px solid var(--orange);border-radius:20px;margin:15px 20px;padding:20px;text-align:center}
.daily-challenge h3{font-family:'Bangers';font-size:24px;color:var(--orange);margin-bottom:8px}
.daily-challenge p{color:var(--blue6);font-size:15px;line-height:1.5}
.challenge-progress{margin-top:12px;background:var(--blue2);border-radius:10px;height:16px;border:1px solid var(--orange);overflow:hidden}
.challenge-fill{height:100%;background:linear-gradient(90deg,var(--orange),var(--gold));border-radius:10px;transition:width 0.5s}
.challenge-btn{margin-top:10px;background:var(--orange);color:#000;font-family:'Bangers';font-size:16px;border:none;border-radius:12px;padding:8px 20px;cursor:pointer;transition:0.2s}
.challenge-btn:hover{transform:scale(1.05);box-shadow:0 5px 15px rgba(255,145,0,0.3)}
.challenge-btn:disabled{opacity:0.5;cursor:not-allowed}

/* QUOTE */
.daily-quote{background:var(--blue2);border-left:4px solid var(--gold);border-radius:0 15px 15px 0;padding:20px;margin:20px;font-style:italic;color:var(--blue6);font-size:clamp(14px,3vw,18px);line-height:1.6}
.daily-quote span{display:block;margin-top:8px;font-style:normal;font-size:14px;color:var(--gold)}

/* GAME FRAME */
.game-frame-wrap{margin:20px;border-radius:20px;overflow:hidden;border:3px solid var(--blue4);box-shadow:0 0 30px rgba(33,150,243,0.2);display:none;position:relative}
.game-frame-wrap.active{display:block}
.game-frame-wrap iframe{width:100%;height:80vh;border:none}
.close-game{position:absolute;top:10px;right:10px;background:rgba(255,0,0,0.8);color:#fff;border:none;border-radius:50%;width:40px;height:40px;font-size:20px;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center}
.close-game:hover{background:red}

/* MINI GAME AREA */
.mini-game-area{background:var(--blue2);border-radius:20px;margin:20px;padding:20px;border:2px solid var(--blue4);display:none}
.mini-game-area.active{display:block}
.mini-game-area canvas{border-radius:12px;display:block;margin:0 auto;background:#0a1628;border:2px solid var(--blue4);max-width:100%}

/* FOOTER */
footer{background:var(--blue2);padding:20px;text-align:center;margin-top:30px;border-top:2px solid var(--blue4)}
footer p{color:var(--blue5);font-size:14px;font-family:'Silkscreen'}

/* STARS */
.stars{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;pointer-events:none}
.star{position:absolute;background:#fff;border-radius:50%;animation:twinkle 2s infinite alternate}
@keyframes twinkle{0%{opacity:0.3}100%{opacity:1}}

/* FRY COUNTER */
.fry-counter{background:var(--blue2);border:2px solid var(--fry);border-radius:15px;padding:8px 16px;display:inline-flex;align-items:center;gap:8px;font-family:'Bangers';font-size:20px;color:var(--gold);margin-top:10px;cursor:pointer;transition:0.2s}
.fry-counter:hover{transform:scale(1.1);box-shadow:0 0 15px rgba(244,164,96,0.3)}
.fry-counter:active{transform:scale(0.95)}

/* TOAST NOTIFICATIONS */
.toast{position:fixed;top:80px;right:20px;background:linear-gradient(135deg,var(--blue2),var(--blue3));border:2px solid var(--cyan);border-radius:15px;padding:12px 20px;color:#fff;font-family:'Fredoka';font-size:14px;z-index:1000;transform:translateX(120%);transition:transform 0.4s;box-shadow:0 8px 25px rgba(0,0,0,0.4);max-width:300px}
.toast.show{transform:translateX(0)}
.toast-icon{font-size:24px;margin-right:8px}

/* CONFETTI */
.confetti-piece{position:fixed;width:8px;height:8px;z-index:999;pointer-events:none;animation:confettiFall 3s linear forwards}
@keyframes confettiFall{0%{transform:translateY(-10px) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}

/* POPUP */
#popup{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:500;display:none;align-items:center;justify-content:center;backdrop-filter:blur(6px)}
#popup>div{background:linear-gradient(145deg,var(--blue2),var(--blue3));border:3px solid var(--blue4);border-radius:25px;padding:30px;max-width:90%;max-height:80vh;text-align:center;overflow-y:auto}
#popup-content{font-size:clamp(16px,3vw,22px);line-height:1.6}

/* AVATAR PICKER */
.avatar-picker{display:grid;grid-template-columns:repeat(5,50px);gap:8px;justify-content:center;margin:15px 0}
.avatar-option{font-size:30px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:var(--blue3);border:2px solid var(--blue4);border-radius:50%;cursor:pointer;transition:0.2s}
.avatar-option:hover{transform:scale(1.15);border-color:var(--cyan)}
.avatar-option.selected{border-color:var(--gold);background:rgba(255,215,0,0.15)}

/* RESPONSIVE */
@media(max-width:600px){.grid{grid-template-columns:1fr;padding:10px}.card{padding:16px}header{padding:15px}.profile-banner{flex-direction:column;text-align:center;align-items:center}.stat-row{justify-content:center}}

/* DAD LOVE FEATURES v3.0 */
.dad-section{background:linear-gradient(135deg,#1a1a3e 0%,#2d1b69 100%);border:2px solid #4a9eff;border-radius:20px;padding:25px;margin:20px auto;max-width:500px;text-align:center;position:relative;overflow:hidden}
.dad-section::before{pointer-events:none;content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(74,158,255,0.1) 0%,transparent 60%);animation:dadGlow 4s ease-in-out infinite}
@keyframes dadGlow{0%,100%{transform:scale(1);opacity:0.5}50%{transform:scale(1.1);opacity:1}}
.dad-section h2{color:#4a9eff;font-size:1.5em;margin-bottom:15px;text-shadow:0 0 10px rgba(74,158,255,0.5)}
.secret-msg-box{background:rgba(74,158,255,0.1);border:2px dashed #4a9eff;border-radius:15px;padding:20px;cursor:pointer;transition:all 0.3s;min-height:60px;display:flex;align-items:center;justify-content:center}
.secret-msg-box:hover{background:rgba(74,158,255,0.2);transform:scale(1.02)}
.secret-msg-box.revealed{border-style:solid;background:rgba(74,158,255,0.15)}
.secret-msg-text{font-size:1.2em;color:#fff;line-height:1.6}
.capsule-btn{background:linear-gradient(135deg,#ff6b35,#ff9a3c);border:none;padding:15px 30px;border-radius:50px;font-size:1.2em;color:#fff;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 15px rgba(255,107,53,0.4);display:inline-block;font-weight:bold}
.capsule-btn:hover{transform:scale(1.1) rotate(2deg);box-shadow:0 6px 25px rgba(255,107,53,0.6)}
.capsule-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
.capsule-result{margin-top:15px;padding:15px;background:rgba(255,255,255,0.1);border-radius:15px;display:none}
.capsule-result.show{display:block;animation:popIn 0.5s ease}
@keyframes popIn{0%{transform:scale(0);opacity:0}50%{transform:scale(1.1)}100%{transform:scale(1);opacity:1}}
.love-letter-btn{background:linear-gradient(135deg,#e91e63,#f06292);border:none;padding:15px 30px;border-radius:50px;font-size:1.2em;color:#fff;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 15px rgba(233,30,99,0.4);font-weight:bold}
.love-letter-btn:hover{transform:scale(1.1);box-shadow:0 6px 25px rgba(233,30,99,0.6)}
.love-letter-content{margin-top:15px;padding:20px;background:rgba(233,30,99,0.1);border:1px solid rgba(233,30,99,0.3);border-radius:15px;display:none;text-align:left;line-height:1.8;color:#fff;font-size:1.1em}
.love-letter-content.show{display:block;animation:popIn 0.5s ease}
.awesome-wall{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:15px}
.awesome-tag{background:linear-gradient(135deg,#00bcd4,#4a9eff);color:#fff;padding:8px 16px;border-radius:20px;font-size:0.95em;font-weight:bold;animation:floatTag 3s ease-in-out infinite;cursor:default;transition:transform 0.3s}
.awesome-tag:hover{transform:scale(1.15) rotate(5deg)}
@keyframes floatTag{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
.heart-particle{position:fixed;pointer-events:none;font-size:20px;z-index:10000;animation:heartFloat 2s ease-out forwards}
@keyframes heartFloat{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-100px) scale(0.5)}}
.dad-divider{text-align:center;margin:30px 0;font-size:1.5em;letter-spacing:10px;color:#4a9eff;text-shadow:0 0 10px rgba(74,158,255,0.3)}

/* UPGRADE SHOP */
.upgrade-shop{background:linear-gradient(135deg,#1a0a2e,#0d2137);border-radius:20px;margin:20px;padding:25px;border:2px solid var(--purple)}
.upgrade-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:15px;margin-top:15px}
.upgrade-card{background:linear-gradient(145deg,var(--blue2),rgba(179,136,255,0.15));border:2px solid var(--purple);border-radius:16px;padding:18px;text-align:center;transition:0.3s;position:relative;overflow:hidden}
.upgrade-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(179,136,255,0.3);border-color:var(--cyan)}
.upgrade-card .upg-icon{font-size:40px;display:block;margin-bottom:8px}
.upgrade-card h4{font-family:'Bangers';font-size:20px;color:var(--purple);margin:5px 0;letter-spacing:1px}
.upgrade-card p{font-size:13px;color:var(--blue5);line-height:1.4}
.upgrade-card .upg-cost{font-family:'Silkscreen';font-size:12px;color:var(--gold);margin-top:8px;display:block}
.upgrade-card .upg-lvl{position:absolute;top:8px;right:8px;font-family:'Silkscreen';font-size:10px;color:var(--cyan);background:var(--blue1);border:1px solid var(--cyan);padding:2px 8px;border-radius:8px}
.upg-buy-btn{background:linear-gradient(135deg,var(--purple),var(--blue4));color:#fff;border:none;border-radius:10px;padding:8px 16px;font-family:'Bangers';font-size:14px;cursor:pointer;transition:0.2s;margin-top:10px;letter-spacing:1px}
.upg-buy-btn:hover{transform:scale(1.05);box-shadow:0 4px 15px rgba(179,136,255,0.4)}
.upg-buy-btn:disabled{opacity:0.4;cursor:not-allowed;transform:none}
.upg-bar{background:var(--blue2);border-radius:8px;height:8px;margin-top:6px;overflow:hidden;border:1px solid var(--purple)}
.upg-bar-fill{height:100%;background:linear-gradient(90deg,var(--purple),var(--cyan));border-radius:8px;transition:width 0.4s}
/* FOCUS TIMER */
.focus-timer{background:linear-gradient(135deg,rgba(0,240,255,0.08),rgba(33,150,243,0.08));border:2px solid var(--cyan);border-radius:20px;margin:15px 20px;padding:20px;text-align:center}
.timer-display{font-family:'Bangers';font-size:clamp(36px,8vw,56px);color:var(--cyan);text-shadow:0 0 20px rgba(0,240,255,0.3);letter-spacing:3px}
.timer-bar{background:var(--blue2);border-radius:10px;height:12px;margin:10px auto;max-width:300px;overflow:hidden;border:1px solid var(--cyan)}
.timer-bar-fill{height:100%;background:linear-gradient(90deg,var(--cyan),var(--green));border-radius:10px;transition:width 1s linear}
.timer-btns{display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap}
.timer-btn{background:var(--blue3);border:2px solid var(--cyan);border-radius:12px;padding:8px 18px;color:var(--cyan);font-family:'Bangers';font-size:15px;cursor:pointer;transition:0.2s;letter-spacing:1px}
.timer-btn:hover{background:var(--cyan);color:#000;transform:scale(1.05)}
.timer-btn.active{background:var(--cyan);color:#000}
/* FIDGET BAY */
.fidget-bay{background:var(--blue2);border-radius:20px;margin:15px 20px;padding:20px;border:2px solid var(--pink);text-align:center}
.bubble-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;max-width:360px;margin:15px auto}
.bubble{width:100%;aspect-ratio:1;background:radial-gradient(circle at 30% 30%,rgba(255,110,199,0.3),var(--blue3));border:2px solid var(--pink);border-radius:50%;cursor:pointer;transition:0.15s;display:flex;align-items:center;justify-content:center;font-size:18px}
.bubble:hover{transform:scale(1.1);box-shadow:0 0 15px rgba(255,110,199,0.3)}
.bubble:active{transform:scale(0.8)}
.bubble.popped{background:transparent;border-style:dashed;opacity:0.3}
/* PROTOCOL ZERO */
#protocol-zero{position:fixed;bottom:20px;right:20px;z-index:200;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#ff0055,#ff6b6b);border:3px solid #fff;box-shadow:0 0 20px rgba(255,0,85,0.5);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:24px;animation:p0pulse 3s infinite;transition:0.2s}
#protocol-zero:hover{transform:scale(1.15)}
@keyframes p0pulse{0%{box-shadow:0 0 0 0 rgba(255,0,85,0.6)}70%{box-shadow:0 0 0 18px rgba(255,0,85,0)}100%{box-shadow:0 0 0 0 rgba(255,0,85,0)}}
#breath-fullscreen{position:fixed;inset:0;background:#000;z-index:9999;display:none;flex-direction:column;align-items:center;justify-content:center}
#breath-fullscreen .big-circle{width:150px;height:150px;border-radius:50%;background:var(--cyan);box-shadow:0 0 60px var(--cyan);animation:bigBreathe 8s infinite ease-in-out}
@keyframes bigBreathe{0%,100%{transform:scale(0.8);opacity:0.3}50%{transform:scale(2.5);opacity:1}}
/* AFFIRMATION */
.affirmation-banner{background:linear-gradient(90deg,rgba(179,136,255,0.1),rgba(0,240,255,0.1));border:1px solid var(--purple);border-radius:15px;padding:15px 20px;margin:10px 20px;text-align:center;cursor:pointer;transition:0.3s}
.affirmation-banner:hover{border-color:var(--cyan);transform:scale(1.01)}
.affirmation-text{font-family:'Fredoka';font-size:clamp(15px,3vw,20px);color:var(--blue6);font-style:italic}
.affirmation-label{font-family:'Silkscreen';font-size:10px;color:var(--purple);margin-top:5px;display:block}

</style>
</head>
<body>
<div class="stars" id="stars"></div>
  <!-- PROTOCOL ZERO -->
  <div id="protocol-zero" onclick="startProtocolZero()" title="Feeling overwhelmed? Click here!">âš“</div>
  <div id="breath-fullscreen" onclick="stopProtocolZero()">
    <div class="big-circle"></div>
    <h2 id="breath-fs-text" style="margin-top:40px;font-family:Bangers;font-size:clamp(24px,5vw,40px);color:var(--cyan);letter-spacing:3px">BREATHE IN...</h2>
    <p style="color:var(--blue5);margin-top:15px;font-size:14px">(Click anywhere to return)</p>
  </div>

<!-- NAV BAR -->
<nav class="topnav" id="topnav">
  <span class="nav-logo">HÃ‚Â·EÃ‚Â·Z</span>
  <button class="nav-btn active" onclick="scrollToSection('top')">Ã°ÂŸÂÂ  Home</button>
  <button class="nav-btn" onclick="scrollToSection('games')">Ã°ÂŸÂÂ® Games</button>
  <button class="nav-btn" onclick="scrollToSection('chill')">Ã°ÂŸÂ§Â˜ Chill</button>
  <button class="nav-btn" onclick="scrollToSection('powerups')">Ã¢ÂšÂ¡ Power</button>
  <button class="nav-btn" onclick="scrollToSection('pet')">Ã°ÂŸÂÂ¾ Pet</button>
  <button class="nav-btn" onclick="scrollToSection('upgrades')">â¬†ï¸ Upgrades</button>
    <button class="nav-btn" onclick="scrollToSection('achievements')">Ã°ÂŸÂÂ† Badges</button>
  <div class="streak-pill" id="streak-pill">Ã°ÂŸÂ”Â¥ <span id="streak-count">0</span> Day Streak</div>
</nav>

<!-- HEADER -->
<header id="header">
  <div class="logo">HAYES' EPIC ZONE</div>
  <div class="subtitle">Ã°ÂŸÂÂŸ YOUR LEGENDARY GAMING HUB Ã°ÂŸÂÂ®</div>
  <div style="margin-top:10px">
    <span style="font-family:Silkscreen;font-size:12px;color:var(--blue5)">HOW ARE YOU FEELING TODAY, HAYES?</span>
    <div class="mood-bar" id="mood-bar">
      <button class="mood-btn" onclick="setMood('happy','Ã°ÂŸÂ˜Â„')" title="Happy">Ã°ÂŸÂ˜Â„</button>
      <button class="mood-btn" onclick="setMood('excited','Ã°ÂŸÂ¤Â©')" title="Excited">Ã°ÂŸÂ¤Â©</button>
      <button class="mood-btn" onclick="setMood('chill','Ã°ÂŸÂ˜Â')" title="Chill">Ã°ÂŸÂ˜Â</button>
      <button class="mood-btn" onclick="setMood('tired','Ã°ÂŸÂ˜Â´')" title="Tired">Ã°ÂŸÂ˜Â´</button>
      <button class="mood-btn" onclick="setMood('sad','Ã°ÂŸÂ˜Â¢')" title="Sad">Ã°ÂŸÂ˜Â¢</button>
      <button class="mood-btn" onclick="setMood('angry','Ã°ÂŸÂ˜Â¤')" title="Frustrated">Ã°ÂŸÂ˜Â¤</button>
    </div>
    <div class="mood-msg" id="mood-msg"></div>
  </div>
</header>

<!-- PROFILE BANNER -->
<div class="profile-banner" id="profile-banner">
  <div class="avatar-area">
    <div class="avatar-display" id="avatar-display" onclick="openAvatarPicker()">Ã°ÂŸÂÂ®</div>
    <div class="avatar-label">TAP TO CHANGE</div>
  </div>
  <div class="profile-stats">
    <h3>Ã¢ÂšÂ¡ HAYES <span class="level-badge" id="level-badge">LVL 1</span></h3>
    <div class="stat-row">
      <div class="stat-item">Ã°ÂŸÂÂŸ <span id="stat-fries">0</span> Fries</div>
      <div class="stat-item">Ã°ÂŸÂÂ® <span id="stat-games">0</span> Played</div>
      <div class="stat-item">Ã°ÂŸÂÂ† <span id="stat-badges">0</span> Badges</div>
      <div class="stat-item">Ã¢Â­Â <span id="stat-stars">0</span> Stars</div>
    </div>
    <div class="xp-bar-wrap">
      <div class="xp-bar" id="xp-bar" style="width:0%"></div>
      <div class="xp-text" id="xp-text">0 / 100 XP</div>
    </div>
  </div>
</div>

<!-- WELCOME -->
<section class="welcome" id="top">
  <div class="welcome-emoji">Ã°ÂŸÂÂŸ</div>
  <h2>WELCOME BACK, HAYES! Ã¢ÂšÂ¡</h2>
  <p>This is YOUR legendary zone Ã¢Â€Â” built with Ã°ÂŸÂ’Â™ just for you! Play epic games, earn fries, level up, take care of your pet, and become the ultimate champion! You are amazing! Ã°ÂŸÂÂ†</p>
  <div class="fry-counter" id="fry-counter" onclick="collectFry()">
    Ã°ÂŸÂÂŸ <span id="fry-count">0</span> FRIES COLLECTED
  </div>
</section>

<!-- DAILY CHALLENGE -->
<div class="daily-challenge" id="daily-challenge">
  <h3>Ã°ÂŸÂÂ¯ DAILY CHALLENGE Ã°ÂŸÂÂ¯</h3>
  <p id="challenge-text">Loading today's challenge...</p>
  <div class="challenge-progress">
    <div class="challenge-fill" id="challenge-fill" style="width:0%"></div>
  </div>
  <button class="challenge-btn" id="challenge-btn" onclick="completeChallenge()">COMPLETE Ã¢ÂœÂ…</button>
</div>

<!-- TICKER -->
<div class="ticker-wrap">
  <div class="ticker" id="ticker">
    Ã°ÂŸÂÂŸ YO HAYES! French fries were invented in Belgium, not France! Ã°ÂŸÂÂ® FORTNITE TIP: Building gives you high ground advantage Ã¢Â€Â” use it! Ã°ÂŸÂ§ÂŠ ROBLOX FACT: Over 40 million games have been created on Roblox! Ã°ÂŸÂ§Â  YOUR BRAIN: Gets stronger every time you learn something new! Ã°ÂŸÂÂŸ The longest french fry EVER was 34 inches! Ã¢ÂšÂ¡ HAYES IS A LEGEND! Never forget that! Ã°ÂŸÂÂ® The first video game was made in 1958! Ã°ÂŸÂ’Â™ HAYES' EPIC ZONE is the coolest place on the internet! Ã°ÂŸÂÂŸ
  </div>
</div>

<!-- ACHIEVEMENTS -->
<div id="achievements">
  <div class="section-title">Ã°ÂŸÂÂ† <span>BADGES & ACHIEVEMENTS</span> Ã°ÂŸÂÂ†</div>
  <div class="achievements-wrap" id="ach-wrap"></div>
</div>

<!-- GAME ZONE -->
<div id="games">
  <div class="section-title">Ã°ÂŸÂÂ® <span>GAME ZONE</span> Ã°ÂŸÂÂ®</div>
  <div class="grid" id="game-grid">
    <div class="card" onclick="openGame('brainrot')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(57,255,20,0.1),transparent)"></div>
      <div class="card-badge">HAYES' GAME!</div>
      <div class="card-icon">Ã°ÂŸÂšÂ½Ã¢ÂšÂ”Ã¯Â¸Â</div>
      <h3>BRAINROT DEFENSE</h3>
      <p>Ohio vs. Skibidi Ultimate! YOUR epic tower defense with Easy Mode! Tap, shout, and destroy!</p>
    </div>
    <div class="card" onclick="openGame('frycatch')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(244,164,96,0.1),transparent)"></div>
      <div class="card-badge hot">Ã°ÂŸÂ”Â¥ HOT</div>
      <div class="card-icon">Ã°ÂŸÂÂŸÃ°ÂŸÂ§Âº</div>
      <h3>FRY CATCHER</h3>
      <p>Catch falling french fries! Move your basket and collect as many golden fries as possible!</p>
    </div>
    <div class="card" onclick="openGame('fortnitebuild')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(179,136,255,0.1),transparent)"></div>
      <div class="card-badge epic">Ã¢ÂšÂ¡ NEW</div>
      <div class="card-icon">Ã°ÂŸÂÂ—Ã¯Â¸ÂÃ°ÂŸÂÂ¯</div>
      <h3>BUILD BATTLE</h3>
      <p>Fortnite-inspired building! Stack blocks, build walls, and reach the sky before time runs out!</p>
    </div>
    <div class="card" onclick="openGame('obbyrunner')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(255,110,199,0.1),transparent)"></div>
      <div class="card-badge epic">Ã¢ÂšÂ¡ NEW</div>
      <div class="card-icon">Ã°ÂŸÂÂƒÃ°ÂŸÂ’Â¨</div>
      <h3>OBBY RUNNER</h3>
      <p>Roblox-style obstacle course! Jump over blocks, dodge hazards, and race to the finish line!</p>
    </div>
    <div class="card" onclick="openGame('fryfactory')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(255,145,0,0.1),transparent)"></div>
      <div class="card-badge hot">Ã°ÂŸÂ”Â¥ HOT</div>
      <div class="card-icon">Ã°ÂŸÂÂ­Ã°ÂŸÂÂŸ</div>
      <h3>FRY FACTORY</h3>
      <p>Run your own fry empire! Click to cook fries, buy upgrades, and become a fry tycoon!</p>
    </div>
    <div class="card" onclick="openGame('clickbattle')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(33,150,243,0.1),transparent)"></div>
      <div class="card-icon">Ã°ÂŸÂ‘Â†Ã°ÂŸÂ’Â¥</div>
      <h3>CLICK BATTLE</h3>
      <p>How fast can you click? Tap the target as many times as you can in 10 seconds!</p>
    </div>
    <div class="card" onclick="openGame('emojimatch')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(255,215,0,0.1),transparent)"></div>
      <div class="card-icon">Ã°ÂŸÂƒÂÃ°ÂŸÂ§Â </div>
      <h3>EMOJI MATCH</h3>
      <p>Find matching pairs! Flip the cards and use your memory to match all the emojis!</p>
    </div>
    <div class="card" onclick="openGame('colorsmash')">
      <div class="card-glow" style="background:radial-gradient(circle at center,rgba(0,240,255,0.1),transparent)"></div>
      <div class="card-badge">FUN!</div>
      <div class="card-icon">Ã°ÂŸÂÂ¨Ã°ÂŸÂ’Â¥</div>
      <h3>COLOR SMASH</h3>
      <p>Tap the color that matches the word Ã¢Â€Â” but watch out, the colors try to trick you!</p>
    </div>
  </div>
</div>

<!-- GAME FRAMES -->
<div class="game-frame-wrap" id="brainrot-frame">
  <button class="close-game" onclick="closeGame('brainrot')">Ã¢ÂœÂ•</button>
  <iframe src="https://cxzyr9hm2t-del.github.io/brainrot-defense-ultimate/" allow="microphone"></iframe>
</div>
<div class="mini-game-area" id="frycatch-area">
  <div style="text-align:center;margin-bottom:10px">
    <span style="font-family:Bangers;font-size:28px;color:var(--gold)">Ã°ÂŸÂÂŸ FRY CATCHER Ã°ÂŸÂÂŸ</span>
    <button class="calm-btn" onclick="closeGame('frycatch')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
  </div>
  <canvas id="frycatch-canvas" width="400" height="500"></canvas>
  <div style="text-align:center;margin-top:10px;font-family:Silkscreen;color:var(--blue5)">Ã¢Â¬Â…Ã¯Â¸Â Ã¢ÂÂ¡Ã¯Â¸Â Arrow keys or tap left/right!</div>
</div>
<div class="mini-game-area" id="fortnitebuild-area">
  <div style="text-align:center;margin-bottom:10px">
    <span style="font-family:Bangers;font-size:28px;color:var(--purple)">Ã°ÂŸÂÂ—Ã¯Â¸Â BUILD BATTLE Ã°ÂŸÂÂ—Ã¯Â¸Â</span>
    <button class="calm-btn" onclick="closeGame('fortnitebuild')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
  </div>
  <canvas id="build-canvas" width="400" height="500"></canvas>
  <div style="text-align:center;margin-top:10px;font-family:Silkscreen;color:var(--blue5)">TAP / CLICK to place blocks! Build HIGH!</div>
</div>
<div class="mini-game-area" id="obbyrunner-area">
  <div style="text-align:center;margin-bottom:10px">
    <span style="font-family:Bangers;font-size:28px;color:var(--pink)">Ã°ÂŸÂÂƒ OBBY RUNNER Ã°ÂŸÂÂƒ</span>
    <button class="calm-btn" onclick="closeGame('obbyrunner')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
  </div>
  <canvas id="obby-canvas" width="400" height="300"></canvas>
  <div style="text-align:center;margin-top:10px;font-family:Silkscreen;color:var(--blue5)">SPACE / TAP to jump! Avoid obstacles!</div>
</div>
<div class="mini-game-area" id="fryfactory-area">
  <div style="text-align:center;margin-bottom:10px">
    <span style="font-family:Bangers;font-size:28px;color:var(--orange)">Ã°ÂŸÂÂ­ FRY FACTORY Ã°ÂŸÂÂ­</span>
    <button class="calm-btn" onclick="closeGame('fryfactory')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
  </div>
  <div id="fry-factory-ui" style="text-align:center;padding:10px"></div>
</div>
<div class="mini-game-area" id="clickbattle-area">
  <div style="text-align:center;padding:20px">
    <span style="font-family:Bangers;font-size:28px;color:var(--gold)">Ã°ÂŸÂ‘Â† CLICK BATTLE Ã°ÂŸÂ‘Â†</span>
    <button class="calm-btn" onclick="closeGame('clickbattle')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
    <div id="click-display" style="margin:20px 0">
      <div style="font-size:80px;cursor:pointer;user-select:none" id="click-target" onclick="clickBattleHit()">Ã°ÂŸÂÂ¯</div>
      <div style="font-family:Bangers;font-size:48px;color:var(--cyan);margin:10px 0" id="click-count">0</div>
      <div style="font-family:Silkscreen;font-size:16px;color:var(--blue5)" id="click-timer">TAP THE TARGET TO START!</div>
      <div style="font-family:Bangers;font-size:20px;color:var(--gold);margin-top:10px" id="click-best">BEST: 0</div>
    </div>
  </div>
</div>
<div class="mini-game-area" id="emojimatch-area">
  <div style="text-align:center;margin-bottom:10px">
    <span style="font-family:Bangers;font-size:28px;color:var(--gold)">Ã°ÂŸÂƒÂ EMOJI MATCH Ã°ÂŸÂƒÂ</span>
    <button class="calm-btn" onclick="closeGame('emojimatch')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
    <span style="font-family:Silkscreen;font-size:14px;color:var(--cyan);margin-left:15px" id="match-score">PAIRS: 0/8</span>
  </div>
  <div id="emoji-grid" style="display:grid;grid-template-columns:repeat(4,70px);gap:10px;justify-content:center"></div>
</div>
<div class="mini-game-area" id="colorsmash-area">
  <div style="text-align:center;margin-bottom:10px">
    <span style="font-family:Bangers;font-size:28px;color:var(--cyan)">Ã°ÂŸÂÂ¨ COLOR SMASH Ã°ÂŸÂÂ¨</span>
    <button class="calm-btn" onclick="closeGame('colorsmash')" style="margin-left:15px">Ã¢ÂœÂ• Close</button>
    <span style="font-family:Silkscreen;font-size:14px;color:var(--gold);margin-left:15px" id="color-score">SCORE: 0</span>
  </div>
  <div id="color-game-ui" style="text-align:center;padding:20px"></div>
</div>

<!-- PET COMPANION SECTION -->
<div id="pet">
  <div class="section-title">Ã°ÂŸÂÂ¾ <span>YOUR PET BUDDY</span> Ã°ÂŸÂÂ¾</div>
  <div class="calm-zone" style="border-color:var(--purple)">
    <h3 style="color:var(--purple)">MEET YOUR PET!</h3>
    <p style="color:var(--blue5);margin-bottom:10px;font-size:14px">Take care of your pet! Feed it fries, play with it, and watch it grow happy! Ã°ÂŸÂ’Â™</p>
    <div class="pet-area">
      <div class="pet-display" id="pet-display" onclick="petPat()">Ã°ÂŸÂÂ¶</div>
      <div class="pet-msg" id="pet-msg">Tap your pet to give it love!</div>
      <div class="pet-status">
        <div class="pet-stat">Ã¢ÂÂ¤Ã¯Â¸Â Happy: <span id="pet-happy">100</span>%</div>
        <div class="pet-stat">Ã°ÂŸÂÂŸ Fed: <span id="pet-fed">100</span>%</div>
        <div class="pet-stat">Ã¢Â­Â Level: <span id="pet-level">1</span></div>
      </div>
    </div>
    <div class="calm-btns" style="margin-top:12px">
      <button class="calm-btn" onclick="petFeed()" style="border-color:var(--fry)">Ã°ÂŸÂÂŸ Feed (5 Fries)</button>
      <button class="calm-btn" onclick="petPlay()" style="border-color:var(--green)">Ã°ÂŸÂÂ® Play</button>
      <button class="calm-btn" onclick="openPetPicker()" style="border-color:var(--purple)">Ã°ÂŸÂ”Â„ Change Pet</button>
    </div>
  </div>
</div>

<!-- CHILL ZONE -->
<div id="chill">
  <div class="section-title">Ã°ÂŸÂ§Â˜ <span>CHILL ZONE</span> Ã°ÂŸÂ§Â˜</div>
  <div class="calm-zone">
    <h3>Ã°ÂŸÂŒÂŠ TAKE A BREATH, HAYES Ã°ÂŸÂŒÂŠ</h3>
    <p style="color:var(--blue5);margin-bottom:10px">Follow the circle Ã¢Â€Â” breathe in as it grows, breathe out as it shrinks</p>
    <div class="breath-circle" id="breath-circle">Breathe...</div>
    <div class="calm-btns">
      <button class="calm-btn" onclick="playRain()">Ã°ÂŸÂŒÂ§Ã¯Â¸Â Rain</button>
      <button class="calm-btn" onclick="playOcean()">Ã°ÂŸÂŒÂŠ Waves</button>
      <button class="calm-btn" onclick="playForest()">Ã°ÂŸÂŒÂ² Forest</button>
      <button class="calm-btn" onclick="playSpace()">Ã°ÂŸÂšÂ€ Space</button>
      <button class="calm-btn" onclick="stopCalm()">Ã°ÂŸÂ”Â‡ Stop</button>
    </div>
  </div>
</div>

<div class="daily-quote" id="daily-quote"></div>

<!-- POWER-UPS -->
<div id="powerups">
  <div class="section-title">Ã¢ÂšÂ¡ <span>POWER-UPS</span> Ã¢ÂšÂ¡</div>
  <div class="grid">
    <div class="card" onclick="showMotivation()">
      <div class="card-icon">Ã°ÂŸÂ’Âª</div>
      <h3>MOTIVATION BOOST</h3>
      <p>Need a pick-me-up? Tap for instant awesome energy, Hayes!</p>
    </div>
    <div class="card" onclick="showJoke()">
      <div class="card-icon">Ã°ÂŸÂ˜Â‚</div>
      <h3>JOKE TIME</h3>
      <p>Tap for a random joke! Warning: extreme laughter incoming!</p>
    </div>
    <div class="card" onclick="spinWheel()">
      <div class="card-icon">Ã°ÂŸÂÂ¡</div>
      <h3>SPIN THE WHEEL</h3>
      <p>Spin to win a challenge or reward! What will Hayes get?</p>
    </div>
    <div class="card" onclick="showFryFact()">
      <div class="card-icon">Ã°ÂŸÂÂŸ</div>
      <h3>FRY FACTS</h3>
      <p>Learn awesome facts about the BEST food ever Ã¢Â€Â” FRENCH FRIES!</p>
    </div>
    <div class="card" onclick="showWouldYouRather()">
      <div class="card-icon">Ã°ÂŸÂ¤Â”</div>
      <h3>WOULD YOU RATHER</h3>
      <p>Fun questions to think about! Pick your answer and earn fries!</p>
    </div>
    <div class="card" onclick="showTrivia()">
      <div class="card-icon">Ã°ÂŸÂ§Â </div>
      <h3>TRIVIA BLAST</h3>
      <p>Test your knowledge about Roblox, Fortnite, fries, and more!</p>
    </div>
  </div>
</div>

<footer>
  <p>Ã°ÂŸÂÂŸ MADE WITH Ã°ÂŸÂ’Â™ JUST FOR HAYES Ã°ÂŸÂÂŸ</p>
  <p style="margin-top:8px;font-size:11px;color:var(--blue4)">HAYES' EPIC ZONE v3.0 Ã¢Â€Â” YOUR LEGENDARY SPACE</p>
</footer>

<!-- POPUP -->
<div id="popup" onclick="closePopup()">
  <div onclick="event.stopPropagation()">
    <div id="popup-content"></div>
    <button class="calm-btn" onclick="closePopup()" style="margin-top:15px">AWESOME! Ã°ÂŸÂ‘Â†</button>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"><span class="toast-icon" id="toast-icon"></span><span id="toast-text"></span></div>


<!-- DAD LOVE FEATURES -->

<!-- AFFIRMATION BANNER -->
<div class="affirmation-banner" id="affirmation-banner" onclick="newAffirmation()">
  <div class="affirmation-text" id="affirmation-text">Loading transmission...</div>
  <span class="affirmation-label">ğŸ“¡ INCOMING TRANSMISSION â€¢ TAP FOR NEW SIGNAL</span>
</div>

<!-- UPGRADE SHOP -->
<div id="upgrades">
  <div class="section-title">â¬†ï¸ <span>UPGRADE SHOP</span> â¬†ï¸</div>
  <div class="upgrade-shop">
    <h3 style="font-family:Bangers;font-size:24px;color:var(--purple);text-align:center;margin-bottom:5px">ğŸ›’ SPEND FRIES TO POWER UP!</h3>
    <p style="text-align:center;color:var(--blue5);font-size:14px;margin-bottom:10px">Upgrade your zone, enhance your games, and unlock epic abilities!</p>
    <div class="upgrade-grid" id="upgrade-grid"></div>
  </div>
</div>

<!-- FOCUS TIMER -->
<div class="focus-timer" id="focus-timer-section">
  <h3 style="font-family:Bangers;font-size:clamp(20px,4vw,28px);color:var(--cyan);margin-bottom:5px">â³ HYPER-FOCUS REACTOR â³</h3>
  <p style="color:var(--blue5);font-size:13px;margin-bottom:10px">Start the reactor before homework or reading. Earn fries when it finishes!</p>
  <div class="timer-display" id="focus-display">15:00</div>
  <div class="timer-bar"><div class="timer-bar-fill" id="focus-bar-fill" style="width:100%"></div></div>
  <div class="timer-btns">
    <button class="timer-btn" id="focus-start-btn" onclick="toggleFocusTimer()">â–¶ï¸ START</button>
    <button class="timer-btn" onclick="resetFocusTimer()">ğŸ”„ RESET</button>
    <button class="timer-btn" onclick="setFocusTime(5)">5 MIN</button>
    <button class="timer-btn" onclick="setFocusTime(10)">10 MIN</button>
    <button class="timer-btn" onclick="setFocusTime(15)">15 MIN</button>
  </div>
</div>

<!-- FIDGET BAY -->
<div class="fidget-bay" id="fidget-bay">
  <h3 style="font-family:Bangers;font-size:clamp(20px,4vw,28px);color:var(--pink);margin-bottom:5px">ğŸ«§ FIDGET BAY ğŸ«§</h3>
  <p style="color:var(--blue5);font-size:13px;margin-bottom:5px">Need to get energy out? Pop some bubbles! They reset so you can pop again!</p>
  <div class="bubble-grid" id="bubble-grid"></div>
  <div style="font-family:Silkscreen;font-size:11px;color:var(--pink);margin-top:10px">POPPED: <span id="pop-count">0</span> ğŸ«§</div>
</div>


<div class="dad-divider">Ã¢ÂÂ¤Ã¯Â¸Â Ã¢ÂÂ¤Ã¯Â¸Â Ã¢ÂÂ¤Ã¯Â¸Â</div>

<div class="dad-section" id="secretSection">
  <h2>Ã°ÂŸÂ”Â’ Secret Message From Dad</h2>
  <p style="color:#aaa;margin-bottom:15px;">Tap to reveal today's secret message!</p>
  <div class="secret-msg-box" id="secretBox" onclick="revealSecret()">
    <span class="secret-msg-text" id="secretText">Ã°ÂŸÂ”Â TAP TO UNLOCK</span>
  </div>
</div>

<div class="dad-section" id="capsuleSection">
  <h2>Ã°ÂŸÂÂ Daily Surprise Capsule</h2>
  <p style="color:#aaa;margin-bottom:15px;">Open your daily surprise from Dad!</p>
  <button class="capsule-btn" id="capsuleBtn" onclick="openCapsule()">Ã°ÂŸÂ“Â¦ OPEN CAPSULE</button>
  <div class="capsule-result" id="capsuleResult">
    <span id="capsuleIcon" style="font-size:2em;display:block;margin-bottom:10px;"></span>
    <span id="capsuleText" style="color:#fff;font-size:1.1em;"></span>
  </div>
</div>

<div class="dad-section" id="loveLetterSection">
  <h2>Ã°ÂŸÂ’ÂŒ Dad's Love Letter</h2>
  <p style="color:#aaa;margin-bottom:15px;">A special letter just for you, Hayes!</p>
  <button class="love-letter-btn" onclick="showLoveLetter()">Ã¢ÂÂ¤Ã¯Â¸Â Read Dad's Letter</button>
  <div class="love-letter-content" id="loveLetterContent"></div>
</div>

<div class="dad-section" id="awesomeSection">
  <h2>Ã¢Â­Â Reasons Hayes Is AWESOME</h2>
  <div class="awesome-wall" id="awesomeWall"></div>
</div>

<div class="dad-divider">Ã¢ÂÂ¤Ã¯Â¸Â Ã¢ÂÂ¤Ã¯Â¸Â Ã¢ÂÂ¤Ã¯Â¸Â</div>
<script>
// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
// HAYES' EPIC ZONE v2.0 Ã¢Â€Â” CORE SYSTEMS
// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•ÂÃ¢Â•Â

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â SAVE/LOAD SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
const SAVE_KEY = 'hayesEpicZone';
let gameData = loadData();

function loadData() {
  try {
    const d = JSON.parse(localStorage.getItem(SAVE_KEY));
    if (d && d.version === 2) return d;
  } catch(e) {}
  return {
    version: 2,
    fries: parseInt(localStorage.getItem('epiczone_fries') || '0'),
    xp: 0, level: 1,
    avatar: 'Ã°ÂŸÂÂ®',
    pet: 'Ã°ÂŸÂÂ¶', petHappy: 100, petFed: 100, petLevel: 1, petXP: 0,
    gamesPlayed: 0, totalClicks: 0,
    streak: 0, lastVisit: '',
    mood: '', moodTime: '',
    achievements: {},
    challengeDone: '',
    clickBest: parseInt(localStorage.getItem('epiczone_clickbest') || '0'),
    stars: 0,
    factoryFries: 0, factoryRate: 1, factoryUpgrades: 0
  };
}

function saveData() {
  localStorage.setItem(SAVE_KEY, JSON.stringify(gameData));
  localStorage.setItem('epiczone_fries', gameData.fries);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â INIT Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function initAll() {
  updateStreak();
  updateUI();
  initStars();
  initFryRain();
  initBreathing();
  initDailyQuote();
  initDailyChallenge();
  initAchievements();
  initPet();
  // Restore mood
  const today = new Date().toDateString();
  if (gameData.moodTime === today && gameData.mood) {
    document.querySelectorAll('.mood-btn').forEach(b => {
      if (b.textContent === gameData.mood) b.classList.add('selected');
    });
  }
  // Pet decay over time
  setInterval(() => {
    gameData.petHappy = Math.max(0, gameData.petHappy - 1);
    gameData.petFed = Math.max(0, gameData.petFed - 1);
    updatePetUI();
    saveData();
  }, 60000);
  // Auto fry rain
  setInterval(spawnPageFry, 5000);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â STREAK SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function updateStreak() {
  const today = new Date().toDateString();
  if (gameData.lastVisit === today) {
    // Already visited today
  } else {
    const yesterday = new Date(Date.now() - 86400000).toDateString();
    if (gameData.lastVisit === yesterday) {
      gameData.streak++;
      showToast('Ã°ÂŸÂ”Â¥', 'Day ' + gameData.streak + ' streak! Keep it up, Hayes!');
      addXP(gameData.streak * 5);
      gameData.stars += gameData.streak;
    } else if (gameData.lastVisit) {
      gameData.streak = 1;
      showToast('Ã°ÂŸÂ”Â¥', 'New streak started! Come back tomorrow!');
    } else {
      gameData.streak = 1;
    }
    gameData.lastVisit = today;
    saveData();
  }
  document.getElementById('streak-count').textContent = gameData.streak;
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â XP & LEVEL SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function addXP(amount) {
  gameData.xp += amount;
  const needed = gameData.level * 100;
  while (gameData.xp >= needed) {
    gameData.xp -= needed;
    gameData.level++;
    showToast('Ã¢Â­Â', 'LEVEL UP! You are now Level ' + gameData.level + '!');
    spawnConfetti();
    gameData.fries += gameData.level * 10;
    gameData.stars += 5;
  }
  saveData();
  updateUI();
}

function addFries(n) {
  gameData.fries += n;
  saveData();
  updateUI();
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â UPDATE ALL UI Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function updateUI() {
  document.getElementById('fry-count').textContent = gameData.fries;
  document.getElementById('stat-fries').textContent = gameData.fries;
  document.getElementById('stat-games').textContent = gameData.gamesPlayed;
  document.getElementById('stat-stars').textContent = gameData.stars;
  document.getElementById('level-badge').textContent = 'LVL ' + gameData.level;
  const needed = gameData.level * 100;
  const pct = Math.min(100, Math.floor((gameData.xp / needed) * 100));
  document.getElementById('xp-bar').style.width = pct + '%';
  document.getElementById('xp-text').textContent = gameData.xp + ' / ' + needed + ' XP';
  document.getElementById('avatar-display').textContent = gameData.avatar;
  // Count unlocked achievements
  const unlocked = Object.values(gameData.achievements).filter(v => v).length;
  document.getElementById('stat-badges').textContent = unlocked;
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â MOOD SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
const MOOD_MSGS = {
  happy: ["That's amazing, Hayes! Ã°ÂŸÂ˜Â„ Your happiness makes the world brighter!", "YESSS! Happy Hayes = Best Hayes! Let's have an awesome time!"],
  excited: ["LET'S GOOO! Ã°ÂŸÂ¤Â© Hayes is PUMPED! Time for some epic gaming!", "That energy is LEGENDARY! Channel it into some games!"],
  chill: ["Vibing mode activated Ã°ÂŸÂ˜Â Hayes is just being cool today!", "Nice and relaxed! Perfect time to play some chill games!"],
  tired: ["It's okay to be tired, Hayes Ã°ÂŸÂ˜Â´ Maybe try the Chill Zone? You can rest AND earn fries!", "Hey champ, even legends need rest! The breathing circle might help!"],
  sad: ["Hey Hayes, it's okay to feel sad sometimes Ã°ÂŸÂ’Â™ You are SO loved and SO important! Try the Motivation Boost!", "Sending you a big virtual hug, Hayes! Ã°ÂŸÂ¤Â— Remember: tough times don't last, but tough kids DO!"],
  angry: ["Take a deep breath, Hayes Ã°ÂŸÂ’Â™ Your feelings are valid! Try the breathing circle Ã¢Â€Â” it really helps!", "It's okay to feel frustrated! Maybe smash some clicks in Click Battle to let it out? Ã°ÂŸÂ’Âª"]
};

function setMood(mood, emoji) {
  gameData.mood = emoji;
  gameData.moodTime = new Date().toDateString();
  saveData();
  document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected'));
  event.target.classList.add('selected');
  const msgs = MOOD_MSGS[mood];
  document.getElementById('mood-msg').textContent = msgs[Math.floor(Math.random() * msgs.length)];
  addXP(5);
  addFries(2);
  checkAchievement('mood_master');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â TOAST NOTIFICATIONS Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let toastTimeout;
function showToast(icon, text) {
  const t = document.getElementById('toast');
  document.getElementById('toast-icon').textContent = icon;
  document.getElementById('toast-text').textContent = text;
  t.classList.add('show');
  clearTimeout(toastTimeout);
  toastTimeout = setTimeout(() => t.classList.remove('show'), 3500);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â CONFETTI Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function spawnConfetti() {
  const colors = ['#FFD700','#2196F3','#39FF14','#FF6EC7','#00F0FF','#FF9100','#B388FF'];
  for (let i = 0; i < 40; i++) {
    const c = document.createElement('div');
    c.className = 'confetti-piece';
    c.style.left = Math.random() * 100 + '%';
    c.style.top = '-10px';
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    c.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    c.style.width = (5 + Math.random() * 8) + 'px';
    c.style.height = (5 + Math.random() * 8) + 'px';
    c.style.animationDuration = (2 + Math.random() * 2) + 's';
    c.style.animationDelay = Math.random() * 0.5 + 's';
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 4000);
  }
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â FRY COUNTER Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function collectFry() {
  addFries(1);
  addXP(1);
  const btn = document.getElementById('fry-counter');
  btn.style.transform = 'scale(1.2)'; setTimeout(() => btn.style.transform = '', 200);
  if (gameData.fries % 50 === 0) {
    showPopup('Ã°ÂŸÂÂŸÃ°ÂŸÂÂŸÃ°ÂŸÂÂŸ<br><span style="font-family:Bangers;font-size:32px;color:var(--gold)">' + gameData.fries + ' FRIES!</span><br>Hayes is a fry collecting LEGEND!');
    spawnConfetti();
    checkAchievement('fry_100');
    checkAchievement('fry_500');
  }
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â STARS BACKGROUND Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function initStars() {
  const c = document.getElementById('stars');
  for (let i = 0; i < 80; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    s.style.width = s.style.height = (1 + Math.random() * 3) + 'px';
    s.style.left = Math.random() * 100 + '%';
    s.style.top = Math.random() * 100 + '%';
    s.style.animationDelay = Math.random() * 2 + 's';
    s.style.animationDuration = (1 + Math.random() * 3) + 's';
    c.appendChild(s);
  }
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â FRY RAIN Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function initFryRain() {
  const h = document.getElementById('header');
  const emojis = ['Ã°ÂŸÂÂŸ','Ã°ÂŸÂÂŸ','Ã°ÂŸÂÂŸ','Ã°ÂŸÂÂ®','Ã¢ÂšÂ¡','Ã°ÂŸÂ’Â™','Ã°ÂŸÂÂ†'];
  for (let i = 0; i < 12; i++) {
    const f = document.createElement('div');
    f.className = 'fry-rain';
    f.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    f.style.left = Math.random() * 100 + '%';
    f.style.animationDuration = (4 + Math.random() * 6) + 's';
    f.style.animationDelay = Math.random() * 8 + 's';
    f.style.fontSize = (16 + Math.random() * 16) + 'px';
    h.appendChild(f);
  }
}

function spawnPageFry() {
  const f = document.createElement('div');
  f.className = 'fry-rain';
  f.textContent = 'Ã°ÂŸÂÂŸ';
  f.style.position = 'fixed'; f.style.left = Math.random() * 100 + '%';
  f.style.top = '-30px'; f.style.fontSize = '20px'; f.style.zIndex = '0';
  f.style.opacity = '0.25';
  f.style.animation = 'fryFall ' + (3 + Math.random() * 4) + 's linear forwards';
  f.style.pointerEvents = 'none';
  document.body.appendChild(f);
  setTimeout(() => { if (f.parentNode) f.remove(); }, 8000);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â NAVIGATION Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function scrollToSection(id) {
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â AVATAR PICKER Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
const AVATARS = ['Ã°ÂŸÂÂ®','Ã°ÂŸÂÂŸ','Ã°ÂŸÂšÂ€','Ã¢ÂšÂ¡','Ã°ÂŸÂ”Â¥','Ã°ÂŸÂ’Â','Ã°ÂŸÂ¦Â¸','Ã°ÂŸÂÂ¶','Ã°ÂŸÂÂ¯','Ã°ÂŸÂÂ†','Ã°ÂŸÂ‘Â¾','Ã°ÂŸÂ¤Â–','Ã°ÂŸÂ¦ÂŠ','Ã°ÂŸÂÂ‰','Ã°ÂŸÂŒÂŸ','Ã°ÂŸÂÂ¨','Ã°ÂŸÂ§ÂŠ','Ã°ÂŸÂ’Â™','Ã°ÂŸÂÂª','Ã°ÂŸÂ¥ÂŠ'];
function openAvatarPicker() {
  let html = '<span style="font-family:Bangers;font-size:28px;color:var(--gold)">CHOOSE YOUR AVATAR</span><br><br>';
  html += '<div class="avatar-picker">';
  AVATARS.forEach(a => {
    const sel = a === gameData.avatar ? ' selected' : '';
    html += '<div class="avatar-option' + sel + '" onclick="pickAvatar(\'' + a + '\')">' + a + '</div>';
  });
  html += '</div>';
  showPopup(html);
}
function pickAvatar(a) {
  gameData.avatar = a;
  saveData();
  updateUI();
  closePopup();
  showToast('Ã¢ÂœÂ¨', 'New avatar: ' + a + '! Looking legendary, Hayes!');
  }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â PET SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
const PETS = ['Ã°ÂŸÂÂ¶','Ã°ÂŸÂÂ±','Ã°ÂŸÂÂ°','Ã°ÂŸÂÂ¼','Ã°ÂŸÂ¦ÂŠ','Ã°ÂŸÂÂ¸','Ã°ÂŸÂÂ²','Ã°ÂŸÂ¦Â„','Ã°ÂŸÂÂ§','Ã°ÂŸÂÂµ'];
const PET_MSGS_PAT = ['Woof! Hayes is the best!','*happy noises*','Your pet loves you!','*tail wagging*','SO much love!','Best friends forever!'];
const PET_MSGS_PLAY = ['WHEEE! That was fun!','Again again!','Your pet had a BLAST!','*zooming around*','Best playtime EVER!'];
const PET_MSGS_FEED = ['NOM NOM NOM! Yummy fries!','*happy munching*','Those fries were DELICIOUS!','More fries please!','Your pet is well fed!'];

function initPet() {
  document.getElementById('pet-display').textContent = gameData.pet;
  updatePetUI();
}

function updatePetUI() {
  document.getElementById('pet-happy').textContent = Math.round(gameData.petHappy);
  document.getElementById('pet-fed').textContent = Math.round(gameData.petFed);
  document.getElementById('pet-level').textContent = gameData.petLevel;
}

function petPat() {
  gameData.petHappy = Math.min(100, gameData.petHappy + 5);
  gameData.petXP += 2;
  checkPetLevelUp();
  const msg = PET_MSGS_PAT[Math.floor(Math.random() * PET_MSGS_PAT.length)];
  document.getElementById('pet-msg').textContent = msg;
  const el = document.getElementById('pet-display');
  el.style.transform = 'scale(1.3)'; setTimeout(() => el.style.transform = '', 300);
  addXP(1);
  saveData();
  updatePetUI();
  checkAchievement('pet_lover');
}

function petFeed() {
  if (gameData.fries < 5) { showToast('Ã°ÂŸÂÂŸ', 'Need 5 fries to feed your pet!'); return; }
  gameData.fries -= 5;
  gameData.petFed = Math.min(100, gameData.petFed + 25);
  gameData.petHappy = Math.min(100, gameData.petHappy + 10);
  gameData.petXP += 5;
  checkPetLevelUp();
  const msg = PET_MSGS_FEED[Math.floor(Math.random() * PET_MSGS_FEED.length)];
  document.getElementById('pet-msg').textContent = msg;
  addXP(3);
  saveData();
  updatePetUI();
  updateUI();
}

function petPlay() {
  gameData.petHappy = Math.min(100, gameData.petHappy + 15);
  gameData.petXP += 3;
  checkPetLevelUp();
  const msg = PET_MSGS_PLAY[Math.floor(Math.random() * PET_MSGS_PLAY.length)];
  document.getElementById('pet-msg').textContent = msg;
  addXP(2);
  addFries(1);
  saveData();
  updatePetUI();
}

function checkPetLevelUp() {
  const needed = gameData.petLevel * 20;
  if (gameData.petXP >= needed) {
    gameData.petXP -= needed;
    gameData.petLevel++;
    showToast('Ã°ÂŸÂÂ¾', 'Pet leveled up to ' + gameData.petLevel + '! Amazing!');
    spawnConfetti();
    checkAchievement('pet_lvl5');
  }
}

function openPetPicker() {
  let html = '<span style="font-family:Bangers;font-size:28px;color:var(--purple)">CHOOSE YOUR PET</span><br><br>';
  html += '<div class="avatar-picker">';
  PETS.forEach(p => {
    const sel = p === gameData.pet ? ' selected' : '';
    html += '<div class="avatar-option' + sel + '" onclick="pickPet(\'' + p + '\')">' + p + '</div>';
  });
  html += '</div>';
  showPopup(html);
}

function pickPet(p) {
  gameData.pet = p;
  document.getElementById('pet-display').textContent = p;
  saveData();
  closePopup();
  showToast('Ã°ÂŸÂÂ¾', 'New pet: ' + p + '! Say hi!');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â ACHIEVEMENT SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
const ACHIEVEMENTS = [
  {id:'first_visit', name:'First Visit', icon:'Ã°ÂŸÂŒÂŸ', desc:'Visit Hayes\' Epic Zone'},
  {id:'fry_100', name:'Fry Fan', icon:'Ã°ÂŸÂÂŸ', desc:'Collect 100 fries'},
  {id:'fry_500', name:'Fry Lord', icon:'Ã°ÂŸÂ‘Â‘', desc:'Collect 500 fries'},
  {id:'mood_master', name:'Mood Check', icon:'Ã°ÂŸÂ˜Â„', desc:'Set your mood'},
  {id:'play_3', name:'Gamer', icon:'Ã°ÂŸÂÂ®', desc:'Play 3 games'},
  {id:'play_10', name:'Pro Gamer', icon:'Ã°ÂŸÂÂ†', desc:'Play 10 games'},
  {id:'pet_lover', name:'Pet Lover', icon:'Ã°ÂŸÂÂ¾', desc:'Pat your pet'},
  {id:'pet_lvl5', name:'Pet Master', icon:'Ã¢Â­Â', desc:'Pet reaches level 5'},
  {id:'streak_3', name:'On Fire', icon:'Ã°ÂŸÂ”Â¥', desc:'3 day streak'},
  {id:'streak_7', name:'Unstoppable', icon:'Ã°ÂŸÂ’Â', desc:'7 day streak'},
  {id:'click_50', name:'Speed Demon', icon:'Ã°ÂŸÂ‘Â†', desc:'50 clicks in 10 seconds'},
  {id:'lvl_5', name:'Rising Star', icon:'Ã°ÂŸÂŒÂŸ', desc:'Reach level 5'},
  {id:'challenger', name:'Challenger', icon:'Ã°ÂŸÂÂ¯', desc:'Complete a daily challenge'},
  {id:'builder', name:'Architect', icon:'Ã°ÂŸÂÂ—Ã¯Â¸Â', desc:'Score 20 in Build Battle'},
  {id:'runner', name:'Speedster', icon:'Ã°ÂŸÂÂƒ', desc:'Score 500 in Obby Runner'},
  {id:'tycoon', name:'Fry Tycoon', icon:'Ã°ÂŸÂÂ­', desc:'Own 5 factory upgrades'},
];

function initAchievements() {
  if (!gameData.achievements.first_visit) {
    gameData.achievements.first_visit = true;
    saveData();
  }
  if (gameData.streak >= 3) checkAchievement('streak_3');
  if (gameData.streak >= 7) checkAchievement('streak_7');
  if (gameData.fries >= 100) checkAchievement('fry_100');
  if (gameData.fries >= 500) checkAchievement('fry_500');
  if (gameData.gamesPlayed >= 3) checkAchievement('play_3');
  if (gameData.gamesPlayed >= 10) checkAchievement('play_10');
  if (gameData.level >= 5) checkAchievement('lvl_5');
  renderAchievements();
}

function checkAchievement(id) {
  if (gameData.achievements[id]) return;
  const ach = ACHIEVEMENTS.find(a => a.id === id);
  if (!ach) return;
  // Check conditions
  if (id === 'fry_100' && gameData.fries < 100) return;
  if (id === 'fry_500' && gameData.fries < 500) return;
  if (id === 'play_3' && gameData.gamesPlayed < 3) return;
  if (id === 'play_10' && gameData.gamesPlayed < 10) return;
  if (id === 'streak_3' && gameData.streak < 3) return;
  if (id === 'streak_7' && gameData.streak < 7) return;
  if (id === 'lvl_5' && gameData.level < 5) return;
  gameData.achievements[id] = true;
  gameData.stars += 10;
  saveData();
  showToast('Ã°ÂŸÂÂ†', 'Badge unlocked: ' + ach.name + '!');
  spawnConfetti();
  renderAchievements();
  updateUI();
}

function renderAchievements() {
  const wrap = document.getElementById('ach-wrap');
  wrap.innerHTML = '';
  ACHIEVEMENTS.forEach(a => {
    const unlocked = gameData.achievements[a.id];
    const div = document.createElement('div');
    div.className = 'ach-badge ' + (unlocked ? 'unlocked' : 'locked');
    div.innerHTML = '<span class="ach-icon">' + (unlocked ? a.icon : 'Ã°ÂŸÂ”Â’') + '</span><span class="ach-name">' + a.name + '</span>';
    div.title = a.desc;
    div.onclick = () => showPopup('<span style="font-size:50px">' + (unlocked ? a.icon : 'Ã°ÂŸÂ”Â’') + '</span><br><span style="font-family:Bangers;font-size:24px;color:' + (unlocked ? 'var(--gold)' : 'var(--blue5)') + '">' + a.name + '</span><br><span style="color:var(--blue6)">' + a.desc + '</span><br><span style="color:' + (unlocked ? 'var(--green)' : 'var(--blue4)') + ';font-family:Silkscreen;font-size:12px">' + (unlocked ? 'Ã¢ÂœÂ… UNLOCKED!' : 'Ã°ÂŸÂ”Â’ Keep going, Hayes!') + '</span>');
    wrap.appendChild(div);
  });
  }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â DAILY CHALLENGE Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
const CHALLENGES = [
  {text:'Click the fry counter 20 times!', goal:20, type:'fryclick'},
  {text:'Play 2 different games!', goal:2, type:'playgames'},
  {text:'Pat your pet 5 times!', goal:5, type:'petpat'},
  {text:'Collect 30 fries from any game!', goal:30, type:'earnfries'},
  {text:'Set your mood and get a motivation boost!', goal:2, type:'mood_motiv'},
  {text:'Score 15+ in Click Battle!', goal:15, type:'clickscore'},
  {text:'Feed your pet twice!', goal:2, type:'petfeed'},
  {text:'Spin the wheel 3 times!', goal:3, type:'spins'},
];
let challengeProgress = 0;
let todayChallenge;

function initDailyChallenge() {
  const today = new Date().toDateString();
  const seed = today.split('').reduce((a, c) => a + c.charCodeAt(0), 0);
  todayChallenge = CHALLENGES[seed % CHALLENGES.length];
  document.getElementById('challenge-text').textContent = todayChallenge.text;
  if (gameData.challengeDone === today) {
    document.getElementById('challenge-fill').style.width = '100%';
    document.getElementById('challenge-btn').disabled = true;
    document.getElementById('challenge-btn').textContent = 'COMPLETED! Ã¢ÂœÂ…';
  }
}

function completeChallenge() {
  const today = new Date().toDateString();
  if (gameData.challengeDone === today) return;
  gameData.challengeDone = today;
  document.getElementById('challenge-fill').style.width = '100%';
  document.getElementById('challenge-btn').disabled = true;
  document.getElementById('challenge-btn').textContent = 'COMPLETED! Ã¢ÂœÂ…';
  addFries(25);
  addXP(30);
  gameData.stars += 5;
  saveData();
  showToast('Ã°ÂŸÂÂ¯', 'Daily challenge complete! +25 fries, +30 XP!');
  spawnConfetti();
  checkAchievement('challenger');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â GAME MANAGEMENT Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function openGame(id) {
  document.querySelectorAll('.game-frame-wrap,.mini-game-area').forEach(el => el.classList.remove('active'));
  gameData.gamesPlayed++;
  saveData();
  updateUI();
  checkAchievement('play_3');
  checkAchievement('play_10');
  addXP(5);

  if (id === 'brainrot') { document.getElementById('brainrot-frame').classList.add('active'); }
  else if (id === 'frycatch') { document.getElementById('frycatch-area').classList.add('active'); startFryCatch(); }
  else if (id === 'fortnitebuild') { document.getElementById('fortnitebuild-area').classList.add('active'); startBuildBattle(); }
  else if (id === 'obbyrunner') { document.getElementById('obbyrunner-area').classList.add('active'); startObbyRunner(); }
  else if (id === 'fryfactory') { document.getElementById('fryfactory-area').classList.add('active'); startFryFactory(); }
  else if (id === 'clickbattle') { document.getElementById('clickbattle-area').classList.add('active'); resetClickBattle(); }
  else if (id === 'emojimatch') { document.getElementById('emojimatch-area').classList.add('active'); startEmojiMatch(); }
  else if (id === 'colorsmash') { document.getElementById('colorsmash-area').classList.add('active'); startColorSmash(); }

  const frameId = id === 'brainrot' ? 'brainrot-frame' : id + '-area';
  document.getElementById(frameId).scrollIntoView({ behavior: 'smooth' });
}

function closeGame(id) {
  if (id === 'brainrot') document.getElementById('brainrot-frame').classList.remove('active');
  else document.getElementById(id + '-area').classList.remove('active');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â FRY CATCHER Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let fryGame = { active: false };
function startFryCatch() {
  const c = document.getElementById('frycatch-canvas'); const ctx = c.getContext('2d');
  fryGame = { active: true, score: 0, basket: 175, fries: [], speed: 2, missed: 0 };
  document.addEventListener('keydown', fryKeyHandler);
  c.onclick = e => { const r = c.getBoundingClientRect(); const x = e.clientX - r.left; fryGame.basket = x < c.width / 2 ? Math.max(25, fryGame.basket - 40) : Math.min(c.width - 25, fryGame.basket + 40); };
  clearInterval(fryGame.interval);
  fryGame.interval = setInterval(() => { if (!fryGame.active) return;
    fryGame.fries.push({ x: 20 + Math.random() * (c.width - 40), y: -20, emoji: Math.random() > 0.15 ? 'Ã°ÂŸÂÂŸ' : 'Ã°ÂŸÂ’Â', speed: 1.5 + Math.random() * fryGame.speed });
  }, 600);
  function draw() {
    if (!fryGame.active) return;
    ctx.clearRect(0, 0, c.width, c.height);
    ctx.fillStyle = '#0d2137'; ctx.fillRect(0, 0, c.width, c.height);
    ctx.font = '40px serif'; ctx.fillText('Ã°ÂŸÂ§Âº', fryGame.basket - 20, c.height - 20);
    for (let i = fryGame.fries.length - 1; i >= 0; i--) {
      const f = fryGame.fries[i]; f.y += f.speed;
      ctx.font = '28px serif'; ctx.fillText(f.emoji, f.x - 14, f.y);
      if (Math.abs(f.x - fryGame.basket) < 35 && f.y > c.height - 50) {
        fryGame.fries.splice(i, 1); fryGame.score += f.emoji === 'Ã°ÂŸÂ’Â' ? 5 : 1;
        fryGame.speed = 2 + fryGame.score * 0.04;
        addFries(f.emoji === 'Ã°ÂŸÂ’Â' ? 3 : 1); addXP(1);
      } else if (f.y > c.height + 20) { fryGame.fries.splice(i, 1); fryGame.missed++; if (fryGame.missed >= 10) fryGame.active = false; }
    }
    ctx.fillStyle = '#FFD700'; ctx.font = 'bold 20px Bangers'; ctx.fillText('Ã°ÂŸÂÂŸ ' + fryGame.score, 10, 30);
    ctx.fillStyle = '#FF6666'; ctx.fillText('Ã¢ÂÂŒ ' + fryGame.missed + '/10', c.width - 90, 30);
    if (!fryGame.active) {
      ctx.fillStyle = 'rgba(0,0,0,0.7)'; ctx.fillRect(0, 0, c.width, c.height);
      ctx.fillStyle = '#FFD700'; ctx.font = 'bold 32px Bangers'; ctx.fillText('GAME OVER!', c.width / 2 - 80, c.height / 2 - 20);
      ctx.fillStyle = '#64B5F6'; ctx.font = '24px Bangers'; ctx.fillText('Score: ' + fryGame.score + ' Ã°ÂŸÂÂŸ', c.width / 2 - 60, c.height / 2 + 20);
      ctx.fillText('Tap to retry!', c.width / 2 - 55, c.height / 2 + 55);
      c.onclick = () => { c.onclick = null; startFryCatch(); }; return;
    }
    requestAnimationFrame(draw);
  }
  draw();
}
function fryKeyHandler(e) {
  if (!fryGame.active) return;
  if (e.key === 'ArrowLeft') fryGame.basket = Math.max(25, fryGame.basket - 30);
  if (e.key === 'ArrowRight') fryGame.basket = Math.min(375, fryGame.basket + 30);
  }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â BUILD BATTLE (Fortnite-inspired) Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let buildGame = { active: false };
function startBuildBattle() {
  const c = document.getElementById('build-canvas'); const ctx = c.getContext('2d');
  buildGame = { active: true, blocks: [], score: 0, time: 30, swingX: 0, swingDir: 1, speed: 2, baseY: c.height - 40 };
  // First block
  buildGame.blocks.push({ x: c.width / 2 - 40, y: buildGame.baseY, w: 80, h: 30 });
  
  const timer = setInterval(() => {
    if (!buildGame.active) { clearInterval(timer); return; }
    buildGame.time--;
    if (buildGame.time <= 0) {
      buildGame.active = false;
      clearInterval(timer);
      addFries(buildGame.score * 2); addXP(buildGame.score * 3);
      if (buildGame.score >= 20) checkAchievement('builder');
    }
  }, 1000);

  c.onclick = () => {
    if (!buildGame.active) { startBuildBattle(); return; }
    const top = buildGame.blocks[buildGame.blocks.length - 1];
    const newX = buildGame.swingX;
    const newY = top.y - 30;
    // Check overlap with top block
    const overlap = Math.min(newX + 70, top.x + top.w) - Math.max(newX, top.x);
    if (overlap > 5) {
      buildGame.blocks.push({ x: Math.max(newX, top.x), y: newY, w: Math.max(overlap, 20), h: 30 });
      buildGame.score++;
      buildGame.speed = Math.min(6, 2 + buildGame.score * 0.15);
      addFries(1); addXP(2);
      // Scroll view up
      if (newY < 150) {
        buildGame.blocks.forEach(b => b.y += 30);
        buildGame.baseY += 30;
      }
    } else {
      // Missed! Block falls
      buildGame.active = false;
      addFries(buildGame.score); addXP(buildGame.score * 2);
      if (buildGame.score >= 20) checkAchievement('builder');
    }
  };

  function draw() {
    ctx.clearRect(0, 0, c.width, c.height);
    // Sky gradient
    const grad = ctx.createLinearGradient(0, 0, 0, c.height);
    grad.addColorStop(0, '#0a1628'); grad.addColorStop(1, '#1a3a5c');
    ctx.fillStyle = grad; ctx.fillRect(0, 0, c.width, c.height);
    // Ground
    ctx.fillStyle = '#2d5a27'; ctx.fillRect(0, c.height - 40, c.width, 40);
    // Blocks
    const colors = ['#2196F3', '#1976D2', '#1565C0', '#0D47A1', '#64B5F6'];
    buildGame.blocks.forEach((b, i) => {
      ctx.fillStyle = colors[i % colors.length];
      ctx.fillRect(b.x, b.y, b.w, b.h);
      ctx.strokeStyle = '#0a1628'; ctx.lineWidth = 2; ctx.strokeRect(b.x, b.y, b.w, b.h);
    });
    // Swinging block
    if (buildGame.active) {
      buildGame.swingX += buildGame.swingDir * buildGame.speed;
      if (buildGame.swingX > c.width - 70) buildGame.swingDir = -1;
      if (buildGame.swingX < 0) buildGame.swingDir = 1;
      const top = buildGame.blocks[buildGame.blocks.length - 1];
      ctx.fillStyle = 'rgba(255,145,0,0.8)';
      ctx.fillRect(buildGame.swingX, top.y - 30, 70, 30);
      ctx.strokeStyle = '#FF9100'; ctx.lineWidth = 2;
      ctx.strokeRect(buildGame.swingX, top.y - 30, 70, 30);
    }
    // HUD
    ctx.fillStyle = '#FFD700'; ctx.font = 'bold 20px Bangers';
    ctx.fillText('Ã°ÂŸÂÂ—Ã¯Â¸Â ' + buildGame.score, 10, 30);
    ctx.fillStyle = '#64B5F6';
    ctx.fillText('Ã¢ÂÂ±Ã¯Â¸Â ' + buildGame.time + 's', c.width - 90, 30);
    if (!buildGame.active) {
      ctx.fillStyle = 'rgba(0,0,0,0.7)'; ctx.fillRect(0, 0, c.width, c.height);
      ctx.fillStyle = '#FFD700'; ctx.font = 'bold 28px Bangers';
      ctx.fillText('HEIGHT: ' + buildGame.score + ' BLOCKS!', c.width / 2 - 110, c.height / 2 - 10);
      ctx.fillStyle = '#64B5F6'; ctx.font = '20px Bangers';
      ctx.fillText('+' + (buildGame.score * 2) + ' fries earned!', c.width / 2 - 70, c.height / 2 + 25);
      ctx.fillText('Tap to play again!', c.width / 2 - 70, c.height / 2 + 55);
      return;
    }
    requestAnimationFrame(draw);
  }
  draw();
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â OBBY RUNNER (Roblox-inspired) Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let obbyGame = { active: false };
function startObbyRunner() {
  const c = document.getElementById('obby-canvas'); const ctx = c.getContext('2d');
  obbyGame = { active: true, x: 60, y: 220, vy: 0, score: 0, obstacles: [], frame: 0, speed: 3, jump: false, grounded: true };
  
  document.addEventListener('keydown', obbyKeyHandler);
  c.onclick = () => { if (obbyGame.active && obbyGame.grounded) { obbyGame.vy = -10; obbyGame.grounded = false; } else if (!obbyGame.active) { startObbyRunner(); } };

  function draw() {
    ctx.clearRect(0, 0, c.width, c.height);
    // Background
    const grad = ctx.createLinearGradient(0, 0, 0, c.height);
    grad.addColorStop(0, '#1a0a28'); grad.addColorStop(1, '#0d2137');
    ctx.fillStyle = grad; ctx.fillRect(0, 0, c.width, c.height);
    // Ground
    ctx.fillStyle = '#39FF14'; ctx.fillRect(0, 260, c.width, 40);
    ctx.fillStyle = '#2d8a10'; ctx.fillRect(0, 265, c.width, 35);

    if (obbyGame.active) {
      obbyGame.frame++;
      obbyGame.score = Math.floor(obbyGame.frame / 5);
      obbyGame.speed = 3 + obbyGame.score * 0.005;

      // Spawn obstacles
      if (obbyGame.frame % Math.max(30, 60 - obbyGame.score) === 0) {
        const type = Math.random();
        if (type < 0.5) obbyGame.obstacles.push({ x: c.width, y: 230, w: 25 + Math.random() * 20, h: 30, color: '#FF6EC7' });
        else obbyGame.obstacles.push({ x: c.width, y: 200 + Math.random() * 30, w: 30, h: 20 + Math.random() * 20, color: '#B388FF' });
      }

      // Physics
      obbyGame.vy += 0.6; // gravity
      obbyGame.y += obbyGame.vy;
      if (obbyGame.y >= 220) { obbyGame.y = 220; obbyGame.vy = 0; obbyGame.grounded = true; }

      // Obstacles
      for (let i = obbyGame.obstacles.length - 1; i >= 0; i--) {
        const o = obbyGame.obstacles[i];
        o.x -= obbyGame.speed;
        // Draw obstacle
        ctx.fillStyle = o.color;
        ctx.fillRect(o.x, o.y, o.w, o.h);
        ctx.strokeStyle = '#fff'; ctx.lineWidth = 1; ctx.strokeRect(o.x, o.y, o.w, o.h);
        // Collision
        if (obbyGame.x + 25 > o.x && obbyGame.x < o.x + o.w && obbyGame.y + 35 > o.y && obbyGame.y < o.y + o.h) {
          obbyGame.active = false;
          addFries(Math.floor(obbyGame.score / 10)); addXP(Math.floor(obbyGame.score / 5));
          if (obbyGame.score >= 500) checkAchievement('runner');
        }
        if (o.x + o.w < 0) obbyGame.obstacles.splice(i, 1);
      }
    }

    // Player (Roblox-style character)
    ctx.fillStyle = '#2196F3'; ctx.fillRect(obbyGame.x, obbyGame.y, 25, 35); // body
    ctx.fillStyle = '#FFD700'; ctx.fillRect(obbyGame.x + 2, obbyGame.y - 12, 21, 15); // head
    ctx.fillStyle = '#000'; ctx.fillRect(obbyGame.x + 6, obbyGame.y - 7, 4, 4); ctx.fillRect(obbyGame.x + 15, obbyGame.y - 7, 4, 4); // eyes
    ctx.fillStyle = '#FF6EC7'; ctx.fillRect(obbyGame.x + 8, obbyGame.y - 2, 9, 2); // smile

    // HUD
    ctx.fillStyle = '#FFD700'; ctx.font = 'bold 18px Bangers';
    ctx.fillText('Ã°ÂŸÂÂƒ ' + obbyGame.score + 'm', 10, 25);

    if (!obbyGame.active) {
      ctx.fillStyle = 'rgba(0,0,0,0.7)'; ctx.fillRect(0, 0, c.width, c.height);
      ctx.fillStyle = '#FFD700'; ctx.font = 'bold 26px Bangers';
      ctx.fillText('RAN ' + obbyGame.score + ' METERS!', c.width / 2 - 100, c.height / 2 - 10);
      ctx.fillStyle = '#64B5F6'; ctx.font = '18px Bangers';
      ctx.fillText('Tap to run again!', c.width / 2 - 65, c.height / 2 + 25);
      return;
    }
    requestAnimationFrame(draw);
  }
  draw();
}
function obbyKeyHandler(e) {
  if (e.code === 'Space' && obbyGame.active && obbyGame.grounded) { obbyGame.vy = -10; obbyGame.grounded = false; e.preventDefault(); }
  }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â FRY FACTORY (Idle Tycoon) Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function startFryFactory() {
  const ui = document.getElementById('fry-factory-ui');
  renderFactory(ui);
}

function renderFactory(ui) {
  const rate = gameData.factoryRate;
  const upgCost = (gameData.factoryUpgrades + 1) * 25;
  ui.innerHTML = '<div style="font-size:80px;cursor:pointer;user-select:none;transition:0.1s" id="factory-clicker" onclick="factoryClick()">Ã°ÂŸÂÂŸ</div>' +
    '<div style="font-family:Bangers;font-size:36px;color:var(--gold);margin:10px 0">Ã°ÂŸÂÂŸ ' + gameData.factoryFries + '</div>' +
    '<div style="font-family:Silkscreen;font-size:12px;color:var(--blue5);margin-bottom:10px">+' + rate + ' fries per click | Upgrades: ' + gameData.factoryUpgrades + '</div>' +
    '<div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">' +
    '<button class="calm-btn" onclick="factoryUpgrade()" style="border-color:var(--orange)">Ã¢Â¬Â†Ã¯Â¸Â Upgrade (+1/click) Ã¢Â€Â” ' + upgCost + ' factory fries</button>' +
    '<button class="calm-btn" onclick="factoryCashOut()" style="border-color:var(--gold)">Ã°ÂŸÂ’Â° Cash Out (' + Math.floor(gameData.factoryFries / 2) + ' real fries)</button>' +
    '</div>' +
    '<div style="font-family:Silkscreen;font-size:10px;color:var(--blue4);margin-top:10px">Click the fry to cook! Upgrade to cook faster!</div>';
}

function factoryClick() {
  gameData.factoryFries += gameData.factoryRate;
  saveData();
  const el = document.getElementById('factory-clicker');
  if (el) { el.style.transform = 'scale(1.3) rotate(10deg)'; setTimeout(() => { if (el) el.style.transform = ''; }, 100); }
  renderFactory(document.getElementById('fry-factory-ui'));
  addXP(1);
}

function factoryUpgrade() {
  const cost = (gameData.factoryUpgrades + 1) * 25;
  if (gameData.factoryFries < cost) { showToast('Ã°ÂŸÂÂ­', 'Need ' + cost + ' factory fries for upgrade!'); return; }
  gameData.factoryFries -= cost;
  gameData.factoryUpgrades++;
  gameData.factoryRate++;
  saveData();
  renderFactory(document.getElementById('fry-factory-ui'));
  showToast('Ã¢Â¬Â†Ã¯Â¸Â', 'Factory upgraded! +' + gameData.factoryRate + ' per click!');
  if (gameData.factoryUpgrades >= 5) checkAchievement('tycoon');
}

function factoryCashOut() {
  const cashout = Math.floor(gameData.factoryFries / 2);
  if (cashout < 1) { showToast('Ã°ÂŸÂÂ­', 'Cook more fries first!'); return; }
  addFries(cashout);
  gameData.factoryFries = 0;
  saveData();
  renderFactory(document.getElementById('fry-factory-ui'));
  showToast('Ã°ÂŸÂ’Â°', 'Cashed out ' + cashout + ' fries! Ka-ching!');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â CLICK BATTLE Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let clickState = { count: 0, active: false, timer: null, best: 0, timeLeft: 10 };
function resetClickBattle() {
  clickState = { count: 0, active: false, timer: null, best: gameData.clickBest, timeLeft: 10 };
  document.getElementById('click-count').textContent = '0';
  document.getElementById('click-timer').textContent = 'TAP THE TARGET TO START!';
  document.getElementById('click-best').textContent = 'BEST: ' + clickState.best;
}

function clickBattleHit() {
  if (!clickState.active) {
    clickState.active = true; clickState.count = 0; clickState.timeLeft = 10;
    document.getElementById('click-timer').textContent = 'Ã¢ÂÂ±Ã¯Â¸Â 10s LEFT!';
    clickState.timer = setInterval(() => {
      clickState.timeLeft--;
      document.getElementById('click-timer').textContent = 'Ã¢ÂÂ±Ã¯Â¸Â ' + clickState.timeLeft + 's LEFT!';
      if (clickState.timeLeft <= 0) {
        clearInterval(clickState.timer); clickState.active = false;
        if (clickState.count > clickState.best) {
          clickState.best = clickState.count; gameData.clickBest = clickState.count; saveData();
          document.getElementById('click-best').textContent = 'BEST: ' + clickState.best;
        }
        document.getElementById('click-timer').textContent = 'DONE! ' + clickState.count + ' CLICKS! TAP TO RETRY';
        addFries(Math.floor(clickState.count / 5)); addXP(Math.floor(clickState.count / 3));
        if (clickState.count >= 50) checkAchievement('click_50');
      }
    }, 1000);
  }
  if (!clickState.active) return;
  clickState.count++;
  document.getElementById('click-count').textContent = clickState.count;
  const t = document.getElementById('click-target');
  t.style.transform = 'scale(0.8)'; setTimeout(() => t.style.transform = 'scale(1)', 80);
  const emojis = ['Ã°ÂŸÂÂ¯', 'Ã°ÂŸÂ’Â¥', 'Ã¢ÂšÂ¡', 'Ã°ÂŸÂ”Â¥', 'Ã°ÂŸÂ’Â', 'Ã°ÂŸÂÂŸ'];
  t.textContent = emojis[Math.floor(Math.random() * emojis.length)];
  setTimeout(() => t.textContent = 'Ã°ÂŸÂÂ¯', 200);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â EMOJI MATCH Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let matchState = { cards: [], flipped: [], matched: 0, busy: false };
function startEmojiMatch() {
  const emojis = ['Ã°ÂŸÂÂŸ', 'Ã°ÂŸÂÂ®', 'Ã°ÂŸÂÂ¯', 'Ã¢ÂšÂ¡', 'Ã°ÂŸÂ’Â', 'Ã°ÂŸÂ”Â¥', 'Ã°ÂŸÂŒÂŸ', 'Ã°ÂŸÂ’Â™'];
  let deck = [...emojis, ...emojis];
  deck.sort(() => Math.random() - 0.5);
  matchState = { cards: deck, flipped: [], matched: 0, busy: false };
  const grid = document.getElementById('emoji-grid'); grid.innerHTML = '';
  document.getElementById('match-score').textContent = 'PAIRS: 0/8';
  deck.forEach((emoji, i) => {
    const card = document.createElement('div');
    card.style.cssText = 'width:70px;height:70px;background:var(--blue3);border:2px solid var(--blue4);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:32px;cursor:pointer;transition:0.3s;user-select:none';
    card.textContent = 'Ã¢ÂÂ“'; card.dataset.idx = i; card.dataset.emoji = emoji; card.dataset.state = 'hidden';
    card.onclick = () => flipCard(card, i);
    grid.appendChild(card);
  });
}

function flipCard(card, idx) {
  if (matchState.busy || card.dataset.state !== 'hidden') return;
  card.textContent = card.dataset.emoji; card.dataset.state = 'shown'; card.style.background = 'var(--blue4)';
  matchState.flipped.push({ card, idx, emoji: card.dataset.emoji });
  if (matchState.flipped.length === 2) {
    matchState.busy = true;
    const [a, b] = matchState.flipped;
    if (a.emoji === b.emoji) {
      matchState.matched++;
      document.getElementById('match-score').textContent = 'PAIRS: ' + matchState.matched + '/8';
      a.card.dataset.state = 'matched'; b.card.dataset.state = 'matched';
      a.card.style.borderColor = 'var(--gold)'; b.card.style.borderColor = 'var(--gold)';
      matchState.flipped = []; matchState.busy = false;
      addFries(1); addXP(2);
      if (matchState.matched === 8) setTimeout(() => { showPopup('Ã°ÂŸÂÂ‰Ã°ÂŸÂÂ‰Ã°ÂŸÂÂ‰<br><span style="font-family:Bangers;font-size:32px;color:var(--gold)">YOU WON!</span><br>Hayes is a MEMORY MASTER!<br>+8 Ã°ÂŸÂÂŸ'); addFries(7); addXP(15); spawnConfetti(); }, 500);
    } else {
      setTimeout(() => {
        a.card.textContent = 'Ã¢ÂÂ“'; a.card.dataset.state = 'hidden'; a.card.style.background = 'var(--blue3)';
        b.card.textContent = 'Ã¢ÂÂ“'; b.card.dataset.state = 'hidden'; b.card.style.background = 'var(--blue3)';
        matchState.flipped = []; matchState.busy = false;
      }, 800);
    }
  }
  }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â COLOR SMASH (Stroop Game) Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let colorGame = { score: 0, active: false, timer: null, timeLeft: 20 };
const COLOR_LIST = [
  { name: 'RED', hex: '#FF4444' },
  { name: 'BLUE', hex: '#2196F3' },
  { name: 'GREEN', hex: '#39FF14' },
  { name: 'YELLOW', hex: '#FFD700' },
  { name: 'PINK', hex: '#FF6EC7' },
  { name: 'CYAN', hex: '#00F0FF' },
];

function startColorSmash() {
  colorGame = { score: 0, active: true, timeLeft: 20 };
  document.getElementById('color-score').textContent = 'SCORE: 0';
  clearInterval(colorGame.timer);
  colorGame.timer = setInterval(() => {
    colorGame.timeLeft--;
    if (colorGame.timeLeft <= 0) {
      clearInterval(colorGame.timer);
      colorGame.active = false;
      addFries(colorGame.score * 2); addXP(colorGame.score * 3);
      renderColorRound();
    }
  }, 1000);
  renderColorRound();
}

function renderColorRound() {
  const ui = document.getElementById('color-game-ui');
  if (!colorGame.active) {
    ui.innerHTML = '<div style="font-family:Bangers;font-size:36px;color:var(--gold);margin:20px 0">SCORE: ' + colorGame.score + '</div>' +
      '<div style="font-family:Fredoka;color:var(--blue5)">+' + (colorGame.score * 2) + ' fries earned!</div>' +
      '<button class="calm-btn" onclick="startColorSmash()" style="margin-top:15px">PLAY AGAIN!</button>';
    return;
  }
  // Pick a random word and a random display color (different from word)
  const wordColor = COLOR_LIST[Math.floor(Math.random() * COLOR_LIST.length)];
  let displayColor;
  do { displayColor = COLOR_LIST[Math.floor(Math.random() * COLOR_LIST.length)]; } while (displayColor.name === wordColor.name);
  const correct = displayColor; // Player must tap the color the text IS displayed in

  // Create answer buttons (3 options including correct)
  let options = [correct];
  while (options.length < 3) {
    const opt = COLOR_LIST[Math.floor(Math.random() * COLOR_LIST.length)];
    if (!options.find(o => o.name === opt.name)) options.push(opt);
  }
  options.sort(() => Math.random() - 0.5);

  ui.innerHTML = '<div style="font-family:Silkscreen;font-size:12px;color:var(--blue5);margin-bottom:5px">Ã¢ÂÂ±Ã¯Â¸Â ' + colorGame.timeLeft + 's | Tap the COLOR of the text (not the word!)</div>' +
    '<div style="font-family:Bangers;font-size:clamp(40px,10vw,60px);color:' + displayColor.hex + ';margin:15px 0">' + wordColor.name + '</div>' +
    '<div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">' +
    options.map(o => '<button style="background:' + o.hex + ';color:#000;font-family:Bangers;font-size:20px;border:3px solid transparent;border-radius:15px;padding:12px 24px;cursor:pointer;min-width:90px;transition:0.2s" onmouseover="this.style.transform=\'scale(1.1)\'" onmouseout="this.style.transform=\'\'" onclick="colorSmashAnswer(\'' + o.name + '\',\'' + correct.name + '\')">' + o.name + '</button>').join('') +
    '</div>';
}

function colorSmashAnswer(picked, correct) {
  if (!colorGame.active) return;
  if (picked === correct) {
    colorGame.score++;
    document.getElementById('color-score').textContent = 'SCORE: ' + colorGame.score;
    addXP(1);
  } else {
    // Wrong! Flash red
    document.getElementById('color-game-ui').style.background = 'rgba(255,0,0,0.1)';
    setTimeout(() => document.getElementById('color-game-ui').style.background = '', 300);
  }
  renderColorRound();
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â POPUP SYSTEM Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function showPopup(html) { document.getElementById('popup-content').innerHTML = html; document.getElementById('popup').style.display = 'flex'; }
function closePopup() { document.getElementById('popup').style.display = 'none'; }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â BREATHING Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function initBreathing() {
  let breathIn = true;
  setInterval(() => {
    document.getElementById('breath-circle').textContent = breathIn ? 'Breathe in...' : 'Breathe out...';
    breathIn = !breathIn;
  }, 3000);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â DAILY QUOTE Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function initDailyQuote() {
  const quotes = [
    { t: "Hayes, you are braver than you believe, stronger than you seem, and smarter than you think.", a: "Ã°ÂŸÂÂ» Winnie the Pooh" },
    { t: "Every expert was once a beginner. Keep going, Hayes!", a: "Ã¢ÂšÂ¡ Power-Up" },
    { t: "Your brain is like a muscle Ã¢Â€Â” the more you use it, the stronger it gets!", a: "Ã°ÂŸÂ§Â  Brain Fact" },
    { t: "It is okay to take breaks. Even superheroes need to rest!", a: "Ã°ÂŸÂ¦Â¸ Hero Tip" },
    { t: "Mistakes are proof that Hayes is trying. Keep being awesome!", a: "Ã°ÂŸÂŒÂŸ Daily Wisdom" },
    { t: "You do not have to be perfect. Just be YOU Ã¢Â€Â” and that is already amazing!", a: "Ã°ÂŸÂ’Â™ Truth" },
    { t: "French fries are proof that good things take time. Be patient with yourself!", a: "Ã°ÂŸÂÂŸ Fry Wisdom" },
    { t: "In Fortnite AND in life Ã¢Â€Â” keep building, keep moving forward!", a: "Ã°ÂŸÂÂ® Gamer Tip" },
    { t: "Hayes, your uniqueness is your superpower. Never forget that!", a: "Ã¢ÂšÂ¡ Power-Up" },
    { t: "Even on tough days, you are still doing great. One step at a time, champ!", a: "Ã°ÂŸÂŒÂˆ Encouragement" },
    { t: "The more you practice, the luckier you get. Just like in Roblox!", a: "Ã°ÂŸÂÂ® Roblox Wisdom" },
    { t: "Hayes, you make the world better just by being in it!", a: "Ã°ÂŸÂ’Â™ Fact" },
  ];
  const q = quotes[Math.floor(Math.random() * quotes.length)];
  document.getElementById('daily-quote').innerHTML = '"' + q.t + '"<span>Ã¢Â€Â” ' + q.a + '</span>';
  }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â MOTIVATION Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function showMotivation() {
  const msgs = [
    'Ã°ÂŸÂ’ÂªÃ°ÂŸÂ”Â¥<br><span style="font-family:Bangers;font-size:36px;color:var(--gold)">HAYES IS UNSTOPPABLE!</span><br>Nothing can hold you back today!',
    'Ã¢ÂšÂ¡Ã°ÂŸÂŒÂŸ<br><span style="font-family:Bangers;font-size:36px;color:var(--cyan)">BELIEVE IN YOURSELF!</span><br>You have already done so many amazing things, Hayes!',
    'Ã°ÂŸÂÂ†Ã°ÂŸÂ’Â™<br><span style="font-family:Bangers;font-size:36px;color:var(--gold)">CHAMPION ENERGY!</span><br>Hayes is one of a kind and the world is lucky to have you!',
    'Ã°ÂŸÂšÂ€Ã°ÂŸÂÂŸ<br><span style="font-family:Bangers;font-size:36px;color:var(--green)">SKY IS THE LIMIT!</span><br>Just like french fries, Hayes makes everything BETTER!',
    'Ã°ÂŸÂÂ®Ã°ÂŸÂ’Â¥<br><span style="font-family:Bangers;font-size:36px;color:var(--pink)">LEGENDARY PLAYER!</span><br>Hayes brings joy everywhere he goes. That is a real superpower!',
    'Ã°ÂŸÂ”Â¥Ã°ÂŸÂ’Â<br><span style="font-family:Bangers;font-size:36px;color:var(--purple)">SIGMA ENERGY!</span><br>Hayes is built different! Absolute LEGEND!',
    'Ã°ÂŸÂÂ—Ã¯Â¸ÂÃ¢ÂšÂ¡<br><span style="font-family:Bangers;font-size:36px;color:var(--cyan)">CRANKING 90s IN LIFE!</span><br>Hayes is building his future and it is EPIC!',
  ];
  showPopup(msgs[Math.floor(Math.random() * msgs.length)]);
  addFries(3); addXP(5);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â JOKES Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function showJoke() {
  const jokes = [
    { q: 'Why did the french fry go to the doctor?', a: 'Because it was feeling a little CRISPY! Ã°ÂŸÂÂŸÃ°ÂŸÂ˜Â‚' },
    { q: 'What do you call a Roblox player who never loses?', a: 'An OBBY-ous winner! Ã°ÂŸÂÂ®Ã°ÂŸÂ˜Â‚' },
    { q: 'Why do Fortnite players never get cold?', a: 'Because they are always building WALLS! Ã°ÂŸÂ§Â±Ã°ÂŸÂ˜Â‚' },
    { q: 'What did the gamer say to the french fry?', a: 'You are GOLDEN! Ã°ÂŸÂÂŸÃ¢ÂœÂ¨' },
    { q: 'Why was the computer cold?', a: 'It left its WINDOWS open! Ã°ÂŸÂ’Â»Ã¢ÂÂ„Ã¯Â¸Â' },
    { q: 'What is a potato\'s favorite game?', a: 'Mash Bros! Ã°ÂŸÂ¥Â”Ã°ÂŸÂ˜Â‚' },
    { q: 'Why did the Skibidi toilet go to school?', a: 'To get a little FLUSHED with knowledge! Ã°ÂŸÂšÂ½Ã°ÂŸÂ“Âš' },
    { q: 'What do you call a sleeping dinosaur?', a: 'A dino-SNORE! Ã°ÂŸÂ¦Â•Ã°ÂŸÂ˜Â´' },
    { q: 'Why did Hayes bring a ladder to the game?', a: 'Because he wanted to reach the NEXT LEVEL! Ã°ÂŸÂªÂœÃ°ÂŸÂÂ®' },
    { q: 'What is Fortnite\'s favorite snack?', a: 'Victory ROYALE with cheese fries! Ã°ÂŸÂÂŸÃ°ÂŸÂ‘Â‘' },
    { q: 'Why did the french fry win the race?', a: 'Because it was on a ROLL! Ã°ÂŸÂÂŸÃ°ÂŸÂÂƒ' },
    { q: 'What do you call a noob in the kitchen?', a: 'A FRIER! Ã°ÂŸÂÂŸÃ°ÂŸÂ”Â¥' },
  ];
  const j = jokes[Math.floor(Math.random() * jokes.length)];
  showPopup('Ã°ÂŸÂ˜Â‚<br><span style="font-family:Bangers;font-size:24px;color:var(--cyan)">' + j.q + '</span><br><br><span style="font-size:22px;color:var(--gold)">' + j.a + '</span>');
  addFries(1); addXP(2);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â SPIN THE WHEEL Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function spinWheel() {
  const options = [
    'Ã°ÂŸÂÂŸ +15 FRIES! Hayes hit the JACKPOT!',
    'Ã°ÂŸÂ’Âª Do 5 jumping jacks right now! GO!',
    'Ã°ÂŸÂ˜Â‚ Tell someone a joke from the Joke section!',
    'Ã°ÂŸÂÂ® Play a round of Build Battle!',
    'Ã°ÂŸÂŒÂŸ Say 3 nice things about yourself, Hayes!',
    'Ã°ÂŸÂ’Â™ Give someone a high-five!',
    'Ã°ÂŸÂÂŸ +8 FRIES! Nice spin, Hayes!',
    'Ã°ÂŸÂ§Â˜ Take 3 deep breaths. You earned it!',
    'Ã°ÂŸÂÂƒ Do a silly dance for 10 seconds!',
    'Ã¢ÂšÂ¡ LEGENDARY: You are literally the GOAT, Hayes!',
    'Ã°ÂŸÂÂ¯ Score 10+ in your next Click Battle!',
    'Ã°ÂŸÂÂ¾ Go pet your virtual pet buddy!',
    'Ã°ÂŸÂÂŸ +20 FRIES! MEGA JACKPOT! Ã°ÂŸÂÂ°',
  ];
  const pick = options[Math.floor(Math.random() * options.length)];
  let bonus = 3;
  if (pick.includes('+15')) bonus = 15;
  else if (pick.includes('+8')) bonus = 8;
  else if (pick.includes('+20')) bonus = 20;
  addFries(bonus); addXP(5);
  showPopup('Ã°ÂŸÂÂ¡<br><span style="font-family:Bangers;font-size:28px;color:var(--gold)">SPIN RESULT!</span><br><br><span style="font-size:20px">' + pick + '</span>');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â FRY FACTS Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function showFryFact() {
  const facts = [
    'Ã°ÂŸÂÂŸ French fries are the #1 most ordered fast food item in the USA!',
    'Ã°ÂŸÂÂŸ Americans eat about 4.5 BILLION pounds of french fries every year!',
    'Ã°ÂŸÂÂŸ The longest french fry ever recorded was 34 inches long!',
    'Ã°ÂŸÂÂŸ French fries were actually invented in Belgium in the 1600s!',
    'Ã°ÂŸÂÂŸ In the UK, french fries are called "chips"!',
    'Ã°ÂŸÂÂŸ The world record for most fries eaten in 1 minute is 86!',
    'Ã°ÂŸÂÂŸ Astronauts can NOT eat french fries in space Ã¢Â€Â” zero gravity!',
    'Ã°ÂŸÂÂŸ Thomas Jefferson was one of the first Americans to serve french fries!',
    'Ã°ÂŸÂÂŸ There is a French Fry museum in Bruges, Belgium!',
    'Ã°ÂŸÂÂŸ Curly fries were invented in 1988!',
  ];
  showPopup(facts[Math.floor(Math.random() * facts.length)] + '<br><br>Ã°ÂŸÂ§Â  <span style="color:var(--cyan)">NOW HAYES KNOWS!</span>');
  addFries(1); addXP(2);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â WOULD YOU RATHER Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function showWouldYouRather() {
  const questions = [
    { a: 'Have unlimited french fries forever Ã°ÂŸÂÂŸ', b: 'Have unlimited V-Bucks forever Ã°ÂŸÂ’Â°' },
    { a: 'Be the #1 Fortnite player in the world Ã°ÂŸÂÂ†', b: 'Create the #1 Roblox game ever Ã°ÂŸÂÂ®' },
    { a: 'Fly like a superhero Ã¢ÂœÂˆÃ¯Â¸Â', b: 'Be invisible whenever you want Ã°ÂŸÂ‘Â»' },
    { a: 'Live in the Fortnite world Ã°ÂŸÂÂÃ¯Â¸Â', b: 'Live in the Roblox world Ã°ÂŸÂ§ÂŠ' },
    { a: 'Have a pet dragon Ã°ÂŸÂÂ‰', b: 'Have a pet unicorn Ã°ÂŸÂ¦Â„' },
    { a: 'Eat only french fries for a week Ã°ÂŸÂÂŸ', b: 'Eat only pizza for a week Ã°ÂŸÂÂ•' },
    { a: 'Be super fast Ã¢ÂšÂ¡', b: 'Be super strong Ã°ÂŸÂ’Âª' },
    { a: 'Have a hoverboard Ã°ÂŸÂ›Â¹', b: 'Have a jetpack Ã°ÂŸÂšÂ€' },
  ];
  const q = questions[Math.floor(Math.random() * questions.length)];
  showPopup('Ã°ÂŸÂ¤Â”<br><span style="font-family:Bangers;font-size:24px;color:var(--gold)">WOULD YOU RATHER...</span><br><br>' +
    '<div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:10px">' +
    '<button class="calm-btn" style="border-color:var(--cyan);flex:1;min-width:120px" onclick="wyrPick()">' + q.a + '</button>' +
    '<button class="calm-btn" style="border-color:var(--pink);flex:1;min-width:120px" onclick="wyrPick()">' + q.b + '</button></div>');
}

function wyrPick() {
  closePopup();
  addFries(3); addXP(3);
  showToast('Ã°ÂŸÂ¤Â”', 'Great choice, Hayes! +3 fries!');
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â TRIVIA BLAST Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
function showTrivia() {
  const trivias = [
    { q: 'What year was Fortnite Battle Royale released?', opts: ['2015', '2017', '2019', '2020'], correct: 1 },
    { q: 'What is the main currency in Roblox?', opts: ['V-Bucks', 'Robux', 'Gems', 'Coins'], correct: 1 },
    { q: 'Which country invented french fries?', opts: ['France', 'USA', 'Belgium', 'UK'], correct: 2 },
    { q: 'How many players are in a Fortnite Battle Royale match?', opts: ['50', '100', '150', '200'], correct: 1 },
    { q: 'What is the name of the Roblox character model?', opts: ['Blocky', 'Noob', 'Steve', 'R15'], correct: 1 },
    { q: 'What are french fries called in the UK?', opts: ['Crisps', 'Chips', 'Wedges', 'Sticks'], correct: 1 },
    { q: 'What does "GG" mean in gaming?', opts: ['Get Going', 'Good Game', 'Go Go', 'Great Guy'], correct: 1 },
  ];
  const t = trivias[Math.floor(Math.random() * trivias.length)];
  let html = 'Ã°ÂŸÂ§Â <br><span style="font-family:Bangers;font-size:22px;color:var(--cyan)">' + t.q + '</span><br><br>';
  html += '<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">';
  t.opts.forEach((o, i) => {
    html += '<button class="calm-btn" style="border-color:var(--blue4)" onclick="triviaAnswer(' + i + ',' + t.correct + ')">' + o + '</button>';
  });
  html += '</div>';
  showPopup(html);
}

function triviaAnswer(picked, correct) {
  if (picked === correct) {
    addFries(5); addXP(10);
    showPopup('Ã¢ÂœÂ…<br><span style="font-family:Bangers;font-size:32px;color:var(--green)">CORRECT!</span><br>Hayes is a GENIUS! +5 fries +10 XP!');
    spawnConfetti();
  } else {
    addFries(1); addXP(2);
    showPopup('Ã¢ÂÂŒ<br><span style="font-family:Bangers;font-size:28px;color:var(--pink)">NOT QUITE!</span><br>Nice try, Hayes! +1 fry for trying!');
  }
      }

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â CALM SOUNDS (Web Audio API) Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â
let calmCtx, calmNodes = [];
function initCalmAudio() { if (!calmCtx) calmCtx = new (window.AudioContext || window.webkitAudioContext)(); if (calmCtx.state === 'suspended') calmCtx.resume(); }
function stopCalm() { calmNodes.forEach(n => { try { n.stop(); } catch (e) {} }); calmNodes = []; if (calmCtx) calmCtx.close().then(() => calmCtx = null); }

function playRain() {
  stopCalm(); initCalmAudio();
  const buf = calmCtx.createBufferSource(); const sz = calmCtx.sampleRate * 10; const b = calmCtx.createBuffer(1, sz, calmCtx.sampleRate);
  const d = b.getChannelData(0); for (let i = 0; i < sz; i++) { d[i] = (Math.random() * 2 - 1) * 0.15; if (i % 400 < 20) d[i] *= 3; }
  buf.buffer = b; buf.loop = true; const f = calmCtx.createBiquadFilter(); f.type = 'lowpass'; f.frequency.value = 800;
  buf.connect(f); f.connect(calmCtx.destination); buf.start(); calmNodes.push(buf);
}

function playOcean() {
  stopCalm(); initCalmAudio();
  const buf = calmCtx.createBufferSource(); const sz = calmCtx.sampleRate * 8; const b = calmCtx.createBuffer(1, sz, calmCtx.sampleRate);
  const d = b.getChannelData(0); for (let i = 0; i < sz; i++) { const t = i / calmCtx.sampleRate; d[i] = (Math.random() * 2 - 1) * 0.08 * (0.5 + 0.5 * Math.sin(t * 0.5)); }
  buf.buffer = b; buf.loop = true; const f = calmCtx.createBiquadFilter(); f.type = 'lowpass'; f.frequency.value = 400;
  buf.connect(f); f.connect(calmCtx.destination); buf.start(); calmNodes.push(buf);
}

function playForest() {
  stopCalm(); initCalmAudio();
  const buf = calmCtx.createBufferSource(); const sz = calmCtx.sampleRate * 10; const b = calmCtx.createBuffer(1, sz, calmCtx.sampleRate);
  const d = b.getChannelData(0);
  for (let i = 0; i < sz; i++) {
    const t = i / calmCtx.sampleRate;
    d[i] = (Math.random() * 2 - 1) * 0.05;
    // Bird chirps
    if (Math.random() < 0.0005) for (let j = 0; j < 200 && i + j < sz; j++) d[i + j] += Math.sin(j * 0.3) * 0.15 * (1 - j / 200);
    // Gentle wind
    d[i] += Math.sin(t * 0.8) * 0.02;
  }
  buf.buffer = b; buf.loop = true; const f = calmCtx.createBiquadFilter(); f.type = 'lowpass'; f.frequency.value = 2000;
  buf.connect(f); f.connect(calmCtx.destination); buf.start(); calmNodes.push(buf);
}

function playSpace() {
  stopCalm(); initCalmAudio();
  const buf = calmCtx.createBufferSource(); const sz = calmCtx.sampleRate * 12; const b = calmCtx.createBuffer(1, sz, calmCtx.sampleRate);
  const d = b.getChannelData(0);
  for (let i = 0; i < sz; i++) {
    const t = i / calmCtx.sampleRate;
    d[i] = Math.sin(t * 60) * 0.04 + Math.sin(t * 90) * 0.03 + Math.sin(t * 150) * 0.02;
    d[i] *= 0.5 + 0.5 * Math.sin(t * 0.2);
  }
  buf.buffer = b; buf.loop = true; const f = calmCtx.createBiquadFilter(); f.type = 'lowpass'; f.frequency.value = 500;
  buf.connect(f); f.connect(calmCtx.destination); buf.start(); calmNodes.push(buf);
}

// Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â INIT ON LOAD Ã¢Â•ÂÃ¢Â•ÂÃ¢Â•Â

// ========================================
// DAD'S LOVE FEATURES - v3.0
// ========================================

var DAD_MESSAGES = [
  "Hayes, you make Dad smile every single day!",
  "Did you know Dad thinks about you ALL the time?",
  "Hayes, you are braver than you believe!",
  "Dad is SO proud of the person you are becoming!",
  "You have the BEST laugh in the whole world!",
  "Every day with you is Dad's favorite day!",
  "Hayes, you are Dad's #1 player in the game of life!",
  "You make the world a better place just by being YOU!",
  "Dad's superpower? Loving YOU!",
  "Hayes, you light up every room you walk into!",
  "Remember: Dad will ALWAYS be on your team!",
  "You are cooler than any Fortnite skin ever made!",
  "Dad would choose YOU over a million Victory Royales!",
  "Hayes, your kindness makes Dad's heart SO happy!",
  "You are the BEST thing that ever happened to Dad!",
  "Hey buddy, just wanted to say: YOU ROCK!",
  "Dad believes in you more than you will ever know!",
  "Hayes, your smile is Dad's favorite thing in the universe!",
  "You are stronger and smarter than you think!",
  "Dad loves you to the moon, around all the stars, and back!"
];

var CAPSULE_SURPRISES = [
  {icon:"Ã°ÂŸÂÂ¨", text:"CREATIVE CHALLENGE: Draw your favorite game character and show Dad!", fries:15, xp:20},
  {icon:"Ã°ÂŸÂ¦Â¸", text:"SUPERPOWER UNLOCKED: You have the power of KINDNESS today!", fries:10, xp:15},
  {icon:"Ã°ÂŸÂÂŸ", text:"FRIES JACKPOT! Dad loaded you up with BONUS FRIES!", fries:50, xp:10},
  {icon:"Ã°ÂŸÂ¤Â—", text:"HUG COUPON: Show this to Dad for ONE FREE MEGA HUG!", fries:5, xp:5},
  {icon:"Ã°ÂŸÂÂ®", text:"GAME TIME: Challenge Dad to play your favorite game together!", fries:10, xp:15},
  {icon:"Ã°ÂŸÂ’Âª", text:"POWER UP: You are UNSTOPPABLE today! Go crush it!", fries:20, xp:25},
  {icon:"Ã¢Â­Â", text:"STAR MOMENT: Tell Dad about the BEST thing that happened today!", fries:10, xp:15},
  {icon:"Ã°ÂŸÂŒÂŸ", text:"DAD FACT: Dad was also 7 once! He wishes he was as cool as you!", fries:10, xp:10},
  {icon:"Ã°ÂŸÂšÂ€", text:"MISSION: Build something amazing today and show Dad!", fries:20, xp:20},
  {icon:"Ã°ÂŸÂÂ†", text:"ACHIEVEMENT: Being the best kid in the world! (That is you, Hayes!)", fries:25, xp:30},
  {icon:"Ã°ÂŸÂŒÂˆ", text:"RAINBOW REWARD: Something awesome is going to happen today!", fries:15, xp:15},
  {icon:"Ã°ÂŸÂ’Â¡", text:"BRAIN BOOST: You are SO smart, Hayes! Your brain is a supercomputer!", fries:10, xp:20},
  {icon:"Ã°ÂŸÂÂµ", text:"DANCE BREAK: Stop everything and do a silly dance for 30 seconds!", fries:10, xp:10},
  {icon:"Ã°ÂŸÂ’Â™", text:"LOVE BOMB: DAD LOVES YOU x 1,000,000! That is a MILLION loves!", fries:30, xp:25}
];

var LOVE_LETTERS = [
  "Dear Hayes,\n\nI want you to know something important: you are the most amazing kid in the entire universe. Every single day, I wake up feeling so lucky that I get to be YOUR dad.\n\nI love watching you play your games, hearing you laugh, and seeing your face light up when you discover something new. You make everything better just by being you.\n\nNever forget: no matter what happens, no matter how your day goes, Dad will ALWAYS love you more than all the fries in the world (and that is A LOT of fries!).\n\nYou are my hero, buddy.\n\nLove always and forever,\nDad",
  "Hey Hayes!\n\nGuess what? I was thinking about you today (I do that a lot!) and I realized something: you are getting SO big and SO awesome!\n\nRemember when you were little? Now look at you - playing cool games, being brave, learning new things every day. I am SO proud of you, buddy.\n\nWhen things get tough, just remember: your Dad believes in you 100 percent. You can do ANYTHING you set your mind to. You are a champion!\n\nI love you more than words can say.\n\nYour biggest fan,\nDad",
  "To My Favorite Person Ever - HAYES!\n\nDid you know that you are one of a kind? There is nobody else in the whole world like you, and that makes you EXTRA special!\n\nI love your creativity. I love your energy. I love how you never give up. I love your smile. I love YOUR laugh. I love everything about you!\n\nEvery time I see you, my heart does a happy dance. You are the BEST part of my life, and I would not trade being your Dad for anything in the universe.\n\nYou are loved. You are special. You are HAYES!\n\nAll my love forever,\nDad"
];

var AWESOME_REASONS = [
  "Super Creative","Kind Heart","Brave Hero","Amazing Gamer",
  "Fast Learner","Great Friend","Funny Guy","Smart Cookie",
  "Hard Worker","Never Gives Up","Fry Expert","Cool Kid",
  "Awesome Builder","Quick Thinker","Big Dreamer","True Champion",
  "Joy Bringer","Problem Solver","Adventure Seeker","Star Player",
  "Music Lover","Roblox Pro","Fortnite Legend","Dance Master","Dad's Pride"
];

function revealSecret() {
  var box = document.getElementById("secretBox");
  var text = document.getElementById("secretText");
  if (box.classList.contains("revealed")) return;
  var dayIndex = Math.floor(Date.now() / 86400000) % DAD_MESSAGES.length;
  text.textContent = DAD_MESSAGES[dayIndex];
  box.classList.add("revealed");
  spawnHearts(box);
  if (typeof addFries === "function") addFries(5);
  showToast("Ã°ÂŸÂ’Â™", "Secret message from Dad revealed!");
}

function openCapsule() {
  var btn = document.getElementById("capsuleBtn");
  var result = document.getElementById("capsuleResult");
  var iconEl = document.getElementById("capsuleIcon");
  var textEl = document.getElementById("capsuleText");
  var lastOpen = localStorage.getItem("hz_capsule_date");
  var today = new Date().toDateString();
  if (lastOpen === today) {
    showToast("Ã¢ÂÂ°", "Come back tomorrow for a new surprise!");
    return;
  }
  localStorage.setItem("hz_capsule_date", today);
  var dayIndex = Math.floor(Date.now() / 86400000) % CAPSULE_SURPRISES.length;
  var surprise = CAPSULE_SURPRISES[dayIndex];
  iconEl.textContent = surprise.icon;
  textEl.textContent = surprise.text;
  result.classList.add("show");
  btn.disabled = true;
  btn.textContent = "Ã¢ÂœÂ… OPENED TODAY!";
  if (typeof addFries === "function") addFries(surprise.fries);
  if (typeof addXP === "function") addXP(surprise.xp);
  spawnHearts(btn);
  showToast("Ã°ÂŸÂÂ", "Surprise from Dad! +" + surprise.fries + " fries!");
}

function showLoveLetter() {
  var content = document.getElementById("loveLetterContent");
  if (content.classList.contains("show")) {
    content.classList.remove("show");
    return;
  }
  var dayIndex = Math.floor(Date.now() / 86400000) % LOVE_LETTERS.length;
  var letter = LOVE_LETTERS[dayIndex];
  content.innerHTML = letter.replace(/\n/g, "<br>");
  content.classList.add("show");
  spawnHearts(content);
}

function spawnHearts(el) {
  var rect = el.getBoundingClientRect();
  var hearts = ["Ã¢ÂÂ¤Ã¯Â¸Â","Ã°ÂŸÂ’Â™","Ã°ÂŸÂ’Âœ","Ã°ÂŸÂ’Â•","Ã¢ÂœÂ¨"];
  for (var i = 0; i < 12; i++) {
    (function(idx) {
      setTimeout(function() {
        var heart = document.createElement("div");
        heart.className = "heart-particle";
        heart.textContent = hearts[idx % hearts.length];
        heart.style.left = (rect.left + Math.random() * rect.width) + "px";
        heart.style.top = (rect.top + Math.random() * rect.height) + "px";
        document.body.appendChild(heart);
        setTimeout(function() { heart.remove(); }, 2000);
      }, idx * 100);
    })(i);
  }
}

function initAwesomeWall() {
  var wall = document.getElementById("awesomeWall");
  if (!wall) return;
  wall.innerHTML = "";
  for (var i = 0; i < AWESOME_REASONS.length; i++) {
    var tag = document.createElement("span");
    tag.className = "awesome-tag";
    tag.textContent = AWESOME_REASONS[i];
    tag.style.animationDelay = (i * 0.1) + "s";
    wall.appendChild(tag);
  }
}

function initCapsuleState() {
  var lastOpen = localStorage.getItem("hz_capsule_date");
  var today = new Date().toDateString();
  if (lastOpen === today) {
    var btn = document.getElementById("capsuleBtn");
    if (btn) {
      btn.disabled = true;
      btn.textContent = "Ã¢ÂœÂ… OPENED TODAY!";
    }
  }
}

function patchMotivationForDad() {
  if (typeof showMotivation === "function") {
    var origMotivation = showMotivation;
    window.showMotivation = function() {
      if (Math.random() < 0.35) {
        var msg = DAD_MESSAGES[Math.floor(Math.random() * DAD_MESSAGES.length)];
        showToast("Ã°ÂŸÂ’Â™", msg);
      } else {
        origMotivation();
      }
    };
  }
}

function dadWelcomeToast() {
  setTimeout(function() {
    var hour = new Date().getHours();
    var greeting = hour < 12 ? "Good morning" : hour < 17 ? "Good afternoon" : "Good evening";
    showToast("Ã°ÂŸÂ’Â™", greeting + ", Hayes! Dad loves you!");
  }, 2000);
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ENHANCEMENT & UPGRADE SYSTEM v3.0
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â•â•â• UPGRADE SHOP â•â•â•
const UPGRADES = [
  {id:'fry_magnet',name:'FRY MAGNET',icon:'ğŸ§²',desc:'Earn 2x fries from all activities!',maxLvl:5,baseCost:50,effect:'2x fry earnings'},
  {id:'xp_boost',name:'XP BOOSTER',icon:'âš¡',desc:'Gain 2x XP from games and actions!',maxLvl:5,baseCost:75,effect:'2x XP gains'},
  {id:'pet_charm',name:'PET CHARM',icon:'ğŸ’',desc:'Your pet loses happiness 50% slower!',maxLvl:3,baseCost:60,effect:'Slower pet decay'},
  {id:'lucky_spin',name:'LUCKY SPINNER',icon:'ğŸ€',desc:'Better rewards from Spin the Wheel!',maxLvl:3,baseCost:80,effect:'Better wheel prizes'},
  {id:'game_shield',name:'GAME SHIELD',icon:'ğŸ›¡ï¸',desc:'Extra lives in Fry Catcher and Obby Runner!',maxLvl:3,baseCost:100,effect:'+1 extra life'},
  {id:'streak_guard',name:'STREAK GUARD',icon:'ğŸ”¥',desc:'Protect your streak if you miss a day!',maxLvl:1,baseCost:200,effect:'1 free miss'},
  {id:'mega_factory',name:'MEGA FACTORY',icon:'ğŸ­',desc:'Factory produces 3x more fries!',maxLvl:3,baseCost:120,effect:'3x factory output'},
  {id:'zen_master',name:'ZEN MASTER',icon:'ğŸ§˜',desc:'Unlock extra calm sounds and themes!',maxLvl:2,baseCost:90,effect:'New calm modes'},
];

function initUpgradeShop() {
  if (!gameData.upgrades) gameData.upgrades = {};
  renderUpgradeShop();
}

function getUpgLevel(id) {
  return gameData.upgrades[id] || 0;
}

function getUpgCost(upg) {
  const lvl = getUpgLevel(upg.id);
  return Math.floor(upg.baseCost * Math.pow(1.5, lvl));
}

function renderUpgradeShop() {
  const grid = document.getElementById('upgrade-grid');
  if (!grid) return;
  grid.innerHTML = '';
  UPGRADES.forEach(upg => {
    const lvl = getUpgLevel(upg.id);
    const cost = getUpgCost(upg);
    const maxed = lvl >= upg.maxLvl;
    const canBuy = gameData.fries >= cost && !maxed;
    const pct = (lvl / upg.maxLvl) * 100;
    const div = document.createElement('div');
    div.className = 'upgrade-card';
    div.innerHTML = '<span class="upg-lvl">' + (maxed ? 'âœ… MAX' : 'LVL ' + lvl + '/' + upg.maxLvl) + '</span>' +
      '<span class="upg-icon">' + upg.icon + '</span>' +
      '<h4>' + upg.name + '</h4>' +
      '<p>' + upg.desc + '</p>' +
      '<div class="upg-bar"><div class="upg-bar-fill" style="width:' + pct + '%"></div></div>' +
      '<span class="upg-cost">' + (maxed ? 'ğŸŒŸ MAXED OUT!' : 'ğŸŸ ' + cost + ' Fries') + '</span>' +
      '<button class="upg-buy-btn" onclick="buyUpgrade(\'' + upg.id + '\')" ' + (canBuy ? '' : 'disabled') + '>' + (maxed ? 'COMPLETE' : 'UPGRADE â¬†ï¸') + '</button>';
    grid.appendChild(div);
  });
}

function buyUpgrade(id) {
  const upg = UPGRADES.find(u => u.id === id);
  if (!upg) return;
  const cost = getUpgCost(upg);
  const lvl = getUpgLevel(id);
  if (gameData.fries < cost || lvl >= upg.maxLvl) return;
  gameData.fries -= cost;
  gameData.upgrades[id] = lvl + 1;
  addXP(20);
  gameData.stars += 3;
  saveData();
  updateUI();
  renderUpgradeShop();
  showToast('â¬†ï¸', upg.name + ' upgraded to Level ' + (lvl + 1) + '!');
  spawnConfetti();
}

// Multiplier helpers
function getFryMultiplier() { return 1 + getUpgLevel('fry_magnet'); }
function getXPMultiplier() { return 1 + getUpgLevel('xp_boost'); }

// Override addFries and addXP to apply multipliers
const _origAddFries = addFries;
addFries = function(n) { _origAddFries(Math.floor(n * getFryMultiplier())); renderUpgradeShop(); };
const _origAddXP = addXP;
addXP = function(n) { _origAddXP(Math.floor(n * getXPMultiplier())); };

// â•â•â• FOCUS TIMER â•â•â•
let focusInterval = null;
let focusTimeLeft = 900; // 15 min default
let focusRunning = false;
let focusTotalTime = 900;

function toggleFocusTimer() {
  if (focusRunning) {
    clearInterval(focusInterval);
    focusRunning = false;
    document.getElementById('focus-start-btn').textContent = 'â–¶ï¸ RESUME';
  } else {
    focusInterval = setInterval(focusTick, 1000);
    focusRunning = true;
    document.getElementById('focus-start-btn').textContent = 'â¸ï¸ PAUSE';
  }
}

function focusTick() {
  if (focusTimeLeft > 0) {
    focusTimeLeft--;
    updateFocusUI();
  } else {
    clearInterval(focusInterval);
    focusRunning = false;
    addFries(25);
    addXP(30);
    gameData.stars += 10;
    saveData();
    document.getElementById('focus-display').textContent = 'âœ… DONE!';
    document.getElementById('focus-start-btn').textContent = 'â–¶ï¸ START';
    showToast('â³', 'Focus complete! +25 fries, +30 XP, +10 stars!');
    spawnConfetti();
  }
}

function updateFocusUI() {
  const m = Math.floor(focusTimeLeft / 60).toString().padStart(2, '0');
  const s = (focusTimeLeft % 60).toString().padStart(2, '0');
  document.getElementById('focus-display').textContent = m + ':' + s;
  const pct = (focusTimeLeft / focusTotalTime) * 100;
  document.getElementById('focus-bar-fill').style.width = pct + '%';
}

function resetFocusTimer() {
  clearInterval(focusInterval);
  focusRunning = false;
  focusTimeLeft = focusTotalTime;
  document.getElementById('focus-start-btn').textContent = 'â–¶ï¸ START';
  updateFocusUI();
}

function setFocusTime(mins) {
  clearInterval(focusInterval);
  focusRunning = false;
  focusTotalTime = mins * 60;
  focusTimeLeft = focusTotalTime;
  document.getElementById('focus-start-btn').textContent = 'â–¶ï¸ START';
  updateFocusUI();
}

// â•â•â• FIDGET BAY â•â•â•
let popCount = parseInt(localStorage.getItem('hz_popcount') || '0');

function initFidgetBay() {
  const grid = document.getElementById('bubble-grid');
  if (!grid) return;
  grid.innerHTML = '';
  for (let i = 0; i < 18; i++) {
    const b = document.createElement('div');
    b.className = 'bubble';
    b.textContent = 'ğŸ«§';
    b.onclick = function() {
      if (this.classList.contains('popped')) return;
      this.classList.add('popped');
      this.textContent = 'ğŸ’¨';
      popCount++;
      localStorage.setItem('hz_popcount', popCount);
      document.getElementById('pop-count').textContent = popCount;
      // Pop sound
      if (calmCtx) {
        try {
          const osc = calmCtx.createOscillator();
          const g = calmCtx.createGain();
          osc.connect(g); g.connect(calmCtx.destination);
          osc.frequency.setValueAtTime(800 + Math.random() * 400, calmCtx.currentTime);
          osc.frequency.exponentialRampToValueAtTime(100, calmCtx.currentTime + 0.1);
          g.gain.setValueAtTime(0.08, calmCtx.currentTime);
          g.gain.exponentialRampToValueAtTime(0.001, calmCtx.currentTime + 0.12);
          osc.start(); osc.stop(calmCtx.currentTime + 0.12);
        } catch(e) {}
      }
      // Auto reset after 2s
      setTimeout(() => { this.classList.remove('popped'); this.textContent = 'ğŸ«§'; }, 2000);
    };
    grid.appendChild(b);
  }
  document.getElementById('pop-count').textContent = popCount;
}

// â•â•â• PROTOCOL ZERO (Panic/Calm Button) â•â•â•
function startProtocolZero() {
  document.getElementById('breath-fullscreen').style.display = 'flex';
  const txt = document.getElementById('breath-fs-text');
  let inhale = true;
  txt.textContent = 'BREATHE IN...';
  window._breathInt = setInterval(() => {
    inhale = !inhale;
    txt.textContent = inhale ? 'BREATHE IN...' : 'BREATHE OUT...';
  }, 4000);
}

function stopProtocolZero() {
  document.getElementById('breath-fullscreen').style.display = 'none';
  clearInterval(window._breathInt);
  addXP(5);
  addFries(2);
}

// â•â•â• AFFIRMATION ENGINE â•â•â•
const AFFIRMATIONS = [
  "Hayes, you are BRAVER than you believe! ğŸ’ª",
  "Your brain works in AMAZING ways! ğŸ§ âœ¨",
  "It is okay to take a break. Even heroes rest! ğŸ¦¸",
  "Mistakes help you learn â€” that makes you a GENIUS! ğŸŒŸ",
  "You are loved EXACTLY as you are! ğŸ’™",
  "Your creativity is your SUPERPOWER! ğŸ¨âš¡",
  "Hayes makes the world BETTER just by being in it! ğŸŒğŸ’™",
  "You are STRONGER than any challenge! ğŸ’",
  "Your smile lights up the WHOLE room! ğŸ˜„âœ¨",
  "Never forget: you are ONE OF A KIND! ğŸ†",
  "Dad is SO proud of the person you are becoming! ğŸ’™",
  "Every day you are getting BETTER and BETTER! ğŸ“ˆ",
  "You have a HEART OF GOLD, Hayes! ğŸ’›",
  "Your energy is LEGENDARY â€” use it for good! âš¡",
  "Tough times do not last, but TOUGH KIDS do! ğŸ’ªğŸ”¥",
];

function newAffirmation() {
  const txt = AFFIRMATIONS[Math.floor(Math.random() * AFFIRMATIONS.length)];
  document.getElementById('affirmation-text').textContent = txt;
  addXP(1);
}

function initAffirmation() {
  newAffirmation();
  // Auto rotate every 30 seconds
  setInterval(newAffirmation, 30000);
}

function initAllEnhanced() {
  initAll();
  initAwesomeWall();
  initCapsuleState();
  patchMotivationForDad();
  dadWelcomeToast();
      initUpgradeShop();
      initFidgetBay();
      initAffirmation();
}
window.addEventListener('DOMContentLoaded', initAllEnhanced);
</script>
</body>
</html>


